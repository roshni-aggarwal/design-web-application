{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _connection = _interopRequireDefault(require(\"./database/connection\"));\nvar _auth = _interopRequireDefault(require(\"./api/auth\"));\nvar _route = _interopRequireDefault(require(\"./config/route.config\"));\nvar _googleOAuth = _interopRequireDefault(require(\"./config/googleOAuth.config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_dotenv.default.config();\nconst app = (0, _express.default)();\n(0, _route.default)(_passport.default);\n(0, _googleOAuth.default)(_passport.default);\napp.use(_express.default.json());\napp.use((0, _expressSession.default)({\n  secret: \"process.env.SECRET_KEY\"\n}));\napp.use(_passport.default.initialize());\napp.use(_passport.default.session());\napp.get(\"/\", (req, res) => {\n  res.json({\n    message: \"Server is running\"\n  });\n});\napp.use(\"/auth\", _auth.default);\nconst PORT = 4000;\napp.listen(PORT, () => {\n  (0, _connection.default)().then(() => {\n    console.log(\"Server is running!!!\");\n  }).catch(error => {\n    console.log(\"Server is running, but database connection failed...\");\n    console.log(error);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJhcHAiLCJleHByZXNzIiwicHJpdmF0ZVJvdXRlQ29uZmlnIiwicGFzc3BvcnQiLCJnb29nbGVBdXRoQ29uZmlnIiwidXNlIiwianNvbiIsInNlc3Npb24iLCJzZWNyZXQiLCJpbml0aWFsaXplIiwiZ2V0IiwicmVxIiwicmVzIiwibWVzc2FnZSIsIkF1dGgiLCJQT1JUIiwibGlzdGVuIiwiQ29ubmVjdERCIiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVycm9yIl0sInNvdXJjZVJvb3QiOiJEOlxccHJvamVjdHNcXGRlc2lnbi13ZWItYXBwbGljYXRpb25cXHNlcnZlclxcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xyXG5pbXBvcnQgc2Vzc2lvbiBmcm9tIFwiZXhwcmVzcy1zZXNzaW9uXCI7XHJcblxyXG5pbXBvcnQgQ29ubmVjdERCIGZyb20gXCIuL2RhdGFiYXNlL2Nvbm5lY3Rpb25cIjtcclxuXHJcbmltcG9ydCBBdXRoIGZyb20gXCIuL2FwaS9hdXRoXCI7XHJcblxyXG5pbXBvcnQgcHJpdmF0ZVJvdXRlQ29uZmlnIGZyb20gXCIuL2NvbmZpZy9yb3V0ZS5jb25maWdcIjtcclxuaW1wb3J0IGdvb2dsZUF1dGhDb25maWcgZnJvbSBcIi4vY29uZmlnL2dvb2dsZU9BdXRoLmNvbmZpZ1wiO1xyXG5cclxuZG90ZW52LmNvbmZpZygpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxucHJpdmF0ZVJvdXRlQ29uZmlnKHBhc3Nwb3J0KTtcclxuZ29vZ2xlQXV0aENvbmZpZyhwYXNzcG9ydCk7XHJcblxyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuYXBwLnVzZShzZXNzaW9uKHsgc2VjcmV0OiBcInByb2Nlc3MuZW52LlNFQ1JFVF9LRVlcIiB9KSk7XHJcbmFwcC51c2UocGFzc3BvcnQuaW5pdGlhbGl6ZSgpKTtcclxuYXBwLnVzZShwYXNzcG9ydC5zZXNzaW9uKCkpO1xyXG5cclxuYXBwLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlNlcnZlciBpcyBydW5uaW5nXCIgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnVzZShcIi9hdXRoXCIsIEF1dGgpO1xyXG5cclxuY29uc3QgUE9SVCA9IDQwMDA7XHJcblxyXG5hcHAubGlzdGVuKFBPUlQsICgpID0+IHtcclxuICBDb25uZWN0REIoKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlNlcnZlciBpcyBydW5uaW5nISEhXCIpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJTZXJ2ZXIgaXMgcnVubmluZywgYnV0IGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkLi4uXCIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQTJEO0FBRTNEQSxlQUFNLENBQUNDLE1BQU0sRUFBRTtBQUVmLE1BQU1DLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxHQUFFO0FBRXJCLElBQUFDLGNBQWtCLEVBQUNDLGlCQUFRLENBQUM7QUFDNUIsSUFBQUMsb0JBQWdCLEVBQUNELGlCQUFRLENBQUM7QUFFMUJILEdBQUcsQ0FBQ0ssR0FBRyxDQUFDSixnQkFBTyxDQUFDSyxJQUFJLEVBQUUsQ0FBQztBQUN2Qk4sR0FBRyxDQUFDSyxHQUFHLENBQUMsSUFBQUUsdUJBQU8sRUFBQztFQUFFQyxNQUFNLEVBQUU7QUFBeUIsQ0FBQyxDQUFDLENBQUM7QUFDdERSLEdBQUcsQ0FBQ0ssR0FBRyxDQUFDRixpQkFBUSxDQUFDTSxVQUFVLEVBQUUsQ0FBQztBQUM5QlQsR0FBRyxDQUFDSyxHQUFHLENBQUNGLGlCQUFRLENBQUNJLE9BQU8sRUFBRSxDQUFDO0FBRTNCUCxHQUFHLENBQUNVLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekJBLEdBQUcsQ0FBQ04sSUFBSSxDQUFDO0lBQUVPLE9BQU8sRUFBRTtFQUFvQixDQUFDLENBQUM7QUFDNUMsQ0FBQyxDQUFDO0FBRUZiLEdBQUcsQ0FBQ0ssR0FBRyxDQUFDLE9BQU8sRUFBRVMsYUFBSSxDQUFDO0FBRXRCLE1BQU1DLElBQUksR0FBRyxJQUFJO0FBRWpCZixHQUFHLENBQUNnQixNQUFNLENBQUNELElBQUksRUFBRSxNQUFNO0VBQ3JCLElBQUFFLG1CQUFTLEdBQUUsQ0FDUkMsSUFBSSxDQUFDLE1BQU07SUFDVkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0JBQXNCLENBQUM7RUFDckMsQ0FBQyxDQUFDLENBQ0RDLEtBQUssQ0FBRUMsS0FBSyxJQUFLO0lBQ2hCSCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzREFBc0QsQ0FBQztJQUNuRUQsT0FBTyxDQUFDQyxHQUFHLENBQUNFLEtBQUssQ0FBQztFQUNwQixDQUFDLENBQUM7QUFDTixDQUFDLENBQUMifQ==","map":{"version":3,"names":["dotenv","config","app","express","privateRouteConfig","passport","googleAuthConfig","use","json","session","secret","initialize","get","req","res","message","Auth","PORT","listen","ConnectDB","then","console","log","catch","error"],"sourceRoot":"D:\\projects\\design-web-application\\server\\","sources":["index.js"],"sourcesContent":["import express from \"express\";\r\nimport dotenv from \"dotenv\";\r\nimport passport from \"passport\";\r\nimport session from \"express-session\";\r\n\r\nimport ConnectDB from \"./database/connection\";\r\n\r\nimport Auth from \"./api/auth\";\r\n\r\nimport privateRouteConfig from \"./config/route.config\";\r\nimport googleAuthConfig from \"./config/googleOAuth.config\";\r\n\r\ndotenv.config();\r\n\r\nconst app = express();\r\n\r\nprivateRouteConfig(passport);\r\ngoogleAuthConfig(passport);\r\n\r\napp.use(express.json());\r\napp.use(session({ secret: \"process.env.SECRET_KEY\" }));\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n\r\napp.get(\"/\", (req, res) => {\r\n  res.json({ message: \"Server is running\" });\r\n});\r\n\r\napp.use(\"/auth\", Auth);\r\n\r\nconst PORT = 4000;\r\n\r\napp.listen(PORT, () => {\r\n  ConnectDB()\r\n    .then(() => {\r\n      console.log(\"Server is running!!!\");\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Server is running, but database connection failed...\");\r\n      console.log(error);\r\n    });\r\n});\r\n"],"mappings":";;AAAA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAA2D;AAE3DA,eAAM,CAACC,MAAM,EAAE;AAEf,MAAMC,GAAG,GAAG,IAAAC,gBAAO,GAAE;AAErB,IAAAC,cAAkB,EAACC,iBAAQ,CAAC;AAC5B,IAAAC,oBAAgB,EAACD,iBAAQ,CAAC;AAE1BH,GAAG,CAACK,GAAG,CAACJ,gBAAO,CAACK,IAAI,EAAE,CAAC;AACvBN,GAAG,CAACK,GAAG,CAAC,IAAAE,uBAAO,EAAC;EAAEC,MAAM,EAAE;AAAyB,CAAC,CAAC,CAAC;AACtDR,GAAG,CAACK,GAAG,CAACF,iBAAQ,CAACM,UAAU,EAAE,CAAC;AAC9BT,GAAG,CAACK,GAAG,CAACF,iBAAQ,CAACI,OAAO,EAAE,CAAC;AAE3BP,GAAG,CAACU,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzBA,GAAG,CAACN,IAAI,CAAC;IAAEO,OAAO,EAAE;EAAoB,CAAC,CAAC;AAC5C,CAAC,CAAC;AAEFb,GAAG,CAACK,GAAG,CAAC,OAAO,EAAES,aAAI,CAAC;AAEtB,MAAMC,IAAI,GAAG,IAAI;AAEjBf,GAAG,CAACgB,MAAM,CAACD,IAAI,EAAE,MAAM;EACrB,IAAAE,mBAAS,GAAE,CACRC,IAAI,CAAC,MAAM;IACVC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;EACrC,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;IAChBH,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;IACnED,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC;EACpB,CAAC,CAAC;AACN,CAAC,CAAC"}},"mtime":1666016864791},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\database\\\\connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = async () => {\n  return _mongoose.default.connect(process.env.MONGO_URL);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09fVVJMIl0sInNvdXJjZVJvb3QiOiJEOlxccHJvamVjdHNcXGRlc2lnbi13ZWItYXBwbGljYXRpb25cXHNlcnZlclxcZGF0YWJhc2VcXCIsInNvdXJjZXMiOlsiY29ubmVjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoKSA9PiB7XHJcbiAgICByZXR1cm4gbW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT19VUkwpO1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUFnQztBQUFBLGVBRWpCLFlBQVk7RUFDdkIsT0FBT0EsaUJBQVEsQ0FBQ0MsT0FBTyxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsU0FBUyxDQUFDO0FBQ2xELENBQUM7QUFBQSJ9","map":{"version":3,"names":["mongoose","connect","process","env","MONGO_URL"],"sourceRoot":"D:\\projects\\design-web-application\\server\\database\\","sources":["connection.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nexport default async () => {\r\n    return mongoose.connect(process.env.MONGO_URL);\r\n}"],"mappings":";;;;;;AAAA;AAAgC;AAAA,eAEjB,YAAY;EACvB,OAAOA,iBAAQ,CAACC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC;AAClD,CAAC;AAAA"}},"mtime":1666009729555},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\database\\\\connection.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = async () => {\n  return _mongoose.default.connect(process.env.MONGO_URL);\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09fVVJMIl0sInNvdXJjZVJvb3QiOiJEOlxccHJvamVjdHNcXGRlc2lnbi13ZWItYXBwbGljYXRpb25cXHNlcnZlclxcZGF0YWJhc2VcXCIsInNvdXJjZXMiOlsiY29ubmVjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoKSA9PiB7XHJcbiAgICByZXR1cm4gbW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT19VUkwpO1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUFnQztBQUFBLGVBRWpCLFlBQVk7RUFDdkIsT0FBT0EsaUJBQVEsQ0FBQ0MsT0FBTyxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsU0FBUyxDQUFDO0FBQ2xELENBQUM7QUFBQSJ9","map":{"version":3,"names":["mongoose","connect","process","env","MONGO_URL"],"sourceRoot":"D:\\projects\\design-web-application\\server\\database\\","sources":["connection.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nexport default async () => {\r\n    return mongoose.connect(process.env.MONGO_URL);\r\n}"],"mappings":";;;;;;AAAA;AAAgC;AAAA,eAEjB,YAAY;EACvB,OAAOA,iBAAQ,CAACC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC;AAClD,CAAC;AAAA"}},"mtime":1666009729555},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\api\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\api\\\\auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _user = require(\"../database/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst Router = _express.default.Router();\n\n/**\r\n * Route     /signup\r\n * Desc      Create new account\r\n * Params    none\r\n * Accesss   Public\r\n * Method    POST\r\n */\nRouter.post(\"/signup\", async (req, res) => {\n  try {\n    await _user.UserModel.findByEmail(req.body.credentials);\n    const newUser = await _user.UserModel.create(req.body.credentials);\n    const token = newUser.generateJwtToken();\n    return res.status(200).json({\n      token,\n      status: \"success\"\n    });\n  } catch (error) {\n    return res.status(500).json({\n      error: error.message\n    });\n  }\n});\n\n/**\r\n * Route     /signin\r\n * Desc      Login into existing account\r\n * Params    none\r\n * Accesss   Public\r\n * Method    POST\r\n */\nRouter.post(\"/signin\", async (req, res) => {\n  try {\n    await ValidateSignIn(req.body.credentials);\n    const user = await _user.UserModel.findByEmailAndPassword(req.body.credentials);\n    const token = user.generateJwtToken();\n    return res.status(200).json({\n      token,\n      status: \"success\"\n    });\n  } catch (error) {\n    return res.status(500).json({\n      error: error.message\n    });\n  }\n});\nRouter.get(\"/google\", _passport.default.authenticate(\"google\", {\n  scope: [\"https://www.googleapis.com/auth/userinfo.profile\", \"https://www.googleapis.com/auth/userinfo.email\"]\n}));\nRouter.get(\"/google/callback\", _passport.default.authenticate(\"google\", {\n  failureRedirect: \"/\"\n}), (req, res) => {\n  return res.status(200).json({\n    token: req.session.passport.user.token\n  });\n\n  // return res.redirect(\n  //   `http://localhost:3000/google/${req.session.passport.user.token}`\n  // );\n});\nvar _default = Router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb3V0ZXIiLCJleHByZXNzIiwicG9zdCIsInJlcSIsInJlcyIsIlVzZXJNb2RlbCIsImZpbmRCeUVtYWlsIiwiYm9keSIsImNyZWRlbnRpYWxzIiwibmV3VXNlciIsImNyZWF0ZSIsInRva2VuIiwiZ2VuZXJhdGVKd3RUb2tlbiIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1lc3NhZ2UiLCJWYWxpZGF0ZVNpZ25JbiIsInVzZXIiLCJmaW5kQnlFbWFpbEFuZFBhc3N3b3JkIiwiZ2V0IiwicGFzc3BvcnQiLCJhdXRoZW50aWNhdGUiLCJzY29wZSIsImZhaWx1cmVSZWRpcmVjdCIsInNlc3Npb24iXSwic291cmNlUm9vdCI6IkQ6XFxwcm9qZWN0c1xcZGVzaWduLXdlYi1hcHBsaWNhdGlvblxcc2VydmVyXFxhcGlcXCIsInNvdXJjZXMiOlsiYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgcGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0XCI7XHJcblxyXG5pbXBvcnQgeyBVc2VyTW9kZWwgfSBmcm9tIFwiLi4vZGF0YWJhc2UvdXNlclwiO1xyXG5cclxuY29uc3QgUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbi8qKlxyXG4gKiBSb3V0ZSAgICAgL3NpZ251cFxyXG4gKiBEZXNjICAgICAgQ3JlYXRlIG5ldyBhY2NvdW50XHJcbiAqIFBhcmFtcyAgICBub25lXHJcbiAqIEFjY2Vzc3MgICBQdWJsaWNcclxuICogTWV0aG9kICAgIFBPU1RcclxuICovXHJcblJvdXRlci5wb3N0KFwiL3NpZ251cFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgVXNlck1vZGVsLmZpbmRCeUVtYWlsKHJlcS5ib2R5LmNyZWRlbnRpYWxzKTtcclxuXHJcbiAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgVXNlck1vZGVsLmNyZWF0ZShyZXEuYm9keS5jcmVkZW50aWFscyk7XHJcbiAgICBjb25zdCB0b2tlbiA9IG5ld1VzZXIuZ2VuZXJhdGVKd3RUb2tlbigpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG9rZW4sIHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogUm91dGUgICAgIC9zaWduaW5cclxuICogRGVzYyAgICAgIExvZ2luIGludG8gZXhpc3RpbmcgYWNjb3VudFxyXG4gKiBQYXJhbXMgICAgbm9uZVxyXG4gKiBBY2Nlc3NzICAgUHVibGljXHJcbiAqIE1ldGhvZCAgICBQT1NUXHJcbiAqL1xyXG5Sb3V0ZXIucG9zdChcIi9zaWduaW5cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IFZhbGlkYXRlU2lnbkluKHJlcS5ib2R5LmNyZWRlbnRpYWxzKTtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyTW9kZWwuZmluZEJ5RW1haWxBbmRQYXNzd29yZChyZXEuYm9keS5jcmVkZW50aWFscyk7XHJcbiAgICBjb25zdCB0b2tlbiA9IHVzZXIuZ2VuZXJhdGVKd3RUb2tlbigpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG9rZW4sIHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5Sb3V0ZXIuZ2V0KFxyXG4gIFwiL2dvb2dsZVwiLFxyXG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImdvb2dsZVwiLCB7XHJcbiAgICBzY29wZTogW1xyXG4gICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8ucHJvZmlsZVwiLFxyXG4gICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8uZW1haWxcIixcclxuICAgIF0sXHJcbiAgfSlcclxuKTtcclxuXHJcblJvdXRlci5nZXQoXHJcbiAgXCIvZ29vZ2xlL2NhbGxiYWNrXCIsXHJcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwiZ29vZ2xlXCIsIHsgZmFpbHVyZVJlZGlyZWN0OiBcIi9cIiB9KSxcclxuICAocmVxLCByZXMpID0+IHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHRva2VuOiByZXEuc2Vzc2lvbi5wYXNzcG9ydC51c2VyLnRva2VuLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gcmV0dXJuIHJlcy5yZWRpcmVjdChcclxuICAgIC8vICAgYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9nb29nbGUvJHtyZXEuc2Vzc2lvbi5wYXNzcG9ydC51c2VyLnRva2VufWBcclxuICAgIC8vICk7XHJcbiAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBQTZDO0FBRTdDLE1BQU1BLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0QsTUFBTSxFQUFFOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBQSxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekMsSUFBSTtJQUNGLE1BQU1DLGVBQVMsQ0FBQ0MsV0FBVyxDQUFDSCxHQUFHLENBQUNJLElBQUksQ0FBQ0MsV0FBVyxDQUFDO0lBRWpELE1BQU1DLE9BQU8sR0FBRyxNQUFNSixlQUFTLENBQUNLLE1BQU0sQ0FBQ1AsR0FBRyxDQUFDSSxJQUFJLENBQUNDLFdBQVcsQ0FBQztJQUM1RCxNQUFNRyxLQUFLLEdBQUdGLE9BQU8sQ0FBQ0csZ0JBQWdCLEVBQUU7SUFDeEMsT0FBT1IsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFSCxLQUFLO01BQUVFLE1BQU0sRUFBRTtJQUFVLENBQUMsQ0FBQztFQUMzRCxDQUFDLENBQUMsT0FBT0UsS0FBSyxFQUFFO0lBQ2QsT0FBT1gsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxLQUFLLEVBQUVBLEtBQUssQ0FBQ0M7SUFBUSxDQUFDLENBQUM7RUFDdkQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQWhCLE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN6QyxJQUFJO0lBQ0YsTUFBTWEsY0FBYyxDQUFDZCxHQUFHLENBQUNJLElBQUksQ0FBQ0MsV0FBVyxDQUFDO0lBQzFDLE1BQU1VLElBQUksR0FBRyxNQUFNYixlQUFTLENBQUNjLHNCQUFzQixDQUFDaEIsR0FBRyxDQUFDSSxJQUFJLENBQUNDLFdBQVcsQ0FBQztJQUN6RSxNQUFNRyxLQUFLLEdBQUdPLElBQUksQ0FBQ04sZ0JBQWdCLEVBQUU7SUFDckMsT0FBT1IsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFSCxLQUFLO01BQUVFLE1BQU0sRUFBRTtJQUFVLENBQUMsQ0FBQztFQUMzRCxDQUFDLENBQUMsT0FBT0UsS0FBSyxFQUFFO0lBQ2QsT0FBT1gsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxLQUFLLEVBQUVBLEtBQUssQ0FBQ0M7SUFBUSxDQUFDLENBQUM7RUFDdkQ7QUFDRixDQUFDLENBQUM7QUFFRmhCLE1BQU0sQ0FBQ29CLEdBQUcsQ0FDUixTQUFTLEVBQ1RDLGlCQUFRLENBQUNDLFlBQVksQ0FBQyxRQUFRLEVBQUU7RUFDOUJDLEtBQUssRUFBRSxDQUNMLGtEQUFrRCxFQUNsRCxnREFBZ0Q7QUFFcEQsQ0FBQyxDQUFDLENBQ0g7QUFFRHZCLE1BQU0sQ0FBQ29CLEdBQUcsQ0FDUixrQkFBa0IsRUFDbEJDLGlCQUFRLENBQUNDLFlBQVksQ0FBQyxRQUFRLEVBQUU7RUFBRUUsZUFBZSxFQUFFO0FBQUksQ0FBQyxDQUFDLEVBQ3pELENBQUNyQixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNaLE9BQU9BLEdBQUcsQ0FBQ1MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFDMUJILEtBQUssRUFBRVIsR0FBRyxDQUFDc0IsT0FBTyxDQUFDSixRQUFRLENBQUNILElBQUksQ0FBQ1A7RUFDbkMsQ0FBQyxDQUFDOztFQUVGO0VBQ0E7RUFDQTtBQUNGLENBQUMsQ0FDRjtBQUFDLGVBRWFYLE1BQU07QUFBQSJ9","map":{"version":3,"names":["Router","express","post","req","res","UserModel","findByEmail","body","credentials","newUser","create","token","generateJwtToken","status","json","error","message","ValidateSignIn","user","findByEmailAndPassword","get","passport","authenticate","scope","failureRedirect","session"],"sourceRoot":"D:\\projects\\design-web-application\\server\\api\\","sources":["auth.js"],"sourcesContent":["import express from \"express\";\r\nimport passport from \"passport\";\r\n\r\nimport { UserModel } from \"../database/user\";\r\n\r\nconst Router = express.Router();\r\n\r\n/**\r\n * Route     /signup\r\n * Desc      Create new account\r\n * Params    none\r\n * Accesss   Public\r\n * Method    POST\r\n */\r\nRouter.post(\"/signup\", async (req, res) => {\r\n  try {\r\n    await UserModel.findByEmail(req.body.credentials);\r\n\r\n    const newUser = await UserModel.create(req.body.credentials);\r\n    const token = newUser.generateJwtToken();\r\n    return res.status(200).json({ token, status: \"success\" });\r\n  } catch (error) {\r\n    return res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * Route     /signin\r\n * Desc      Login into existing account\r\n * Params    none\r\n * Accesss   Public\r\n * Method    POST\r\n */\r\nRouter.post(\"/signin\", async (req, res) => {\r\n  try {\r\n    await ValidateSignIn(req.body.credentials);\r\n    const user = await UserModel.findByEmailAndPassword(req.body.credentials);\r\n    const token = user.generateJwtToken();\r\n    return res.status(200).json({ token, status: \"success\" });\r\n  } catch (error) {\r\n    return res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\nRouter.get(\r\n  \"/google\",\r\n  passport.authenticate(\"google\", {\r\n    scope: [\r\n      \"https://www.googleapis.com/auth/userinfo.profile\",\r\n      \"https://www.googleapis.com/auth/userinfo.email\",\r\n    ],\r\n  })\r\n);\r\n\r\nRouter.get(\r\n  \"/google/callback\",\r\n  passport.authenticate(\"google\", { failureRedirect: \"/\" }),\r\n  (req, res) => {\r\n    return res.status(200).json({\r\n      token: req.session.passport.user.token,\r\n    });\r\n\r\n    // return res.redirect(\r\n    //   `http://localhost:3000/google/${req.session.passport.user.token}`\r\n    // );\r\n  }\r\n);\r\n\r\nexport default Router;"],"mappings":";;;;;;AAAA;AACA;AAEA;AAA6C;AAE7C,MAAMA,MAAM,GAAGC,gBAAO,CAACD,MAAM,EAAE;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACE,IAAI,CAAC,SAAS,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACzC,IAAI;IACF,MAAMC,eAAS,CAACC,WAAW,CAACH,GAAG,CAACI,IAAI,CAACC,WAAW,CAAC;IAEjD,MAAMC,OAAO,GAAG,MAAMJ,eAAS,CAACK,MAAM,CAACP,GAAG,CAACI,IAAI,CAACC,WAAW,CAAC;IAC5D,MAAMG,KAAK,GAAGF,OAAO,CAACG,gBAAgB,EAAE;IACxC,OAAOR,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEH,KAAK;MAAEE,MAAM,EAAE;IAAU,CAAC,CAAC;EAC3D,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,OAAOX,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEA,KAAK,CAACC;IAAQ,CAAC,CAAC;EACvD;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACAhB,MAAM,CAACE,IAAI,CAAC,SAAS,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACzC,IAAI;IACF,MAAMa,cAAc,CAACd,GAAG,CAACI,IAAI,CAACC,WAAW,CAAC;IAC1C,MAAMU,IAAI,GAAG,MAAMb,eAAS,CAACc,sBAAsB,CAAChB,GAAG,CAACI,IAAI,CAACC,WAAW,CAAC;IACzE,MAAMG,KAAK,GAAGO,IAAI,CAACN,gBAAgB,EAAE;IACrC,OAAOR,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEH,KAAK;MAAEE,MAAM,EAAE;IAAU,CAAC,CAAC;EAC3D,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,OAAOX,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEA,KAAK,CAACC;IAAQ,CAAC,CAAC;EACvD;AACF,CAAC,CAAC;AAEFhB,MAAM,CAACoB,GAAG,CACR,SAAS,EACTC,iBAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;EAC9BC,KAAK,EAAE,CACL,kDAAkD,EAClD,gDAAgD;AAEpD,CAAC,CAAC,CACH;AAEDvB,MAAM,CAACoB,GAAG,CACR,kBAAkB,EAClBC,iBAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;EAAEE,eAAe,EAAE;AAAI,CAAC,CAAC,EACzD,CAACrB,GAAG,EAAEC,GAAG,KAAK;EACZ,OAAOA,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAC1BH,KAAK,EAAER,GAAG,CAACsB,OAAO,CAACJ,QAAQ,CAACH,IAAI,CAACP;EACnC,CAAC,CAAC;;EAEF;EACA;EACA;AACF,CAAC,CACF;AAAC,eAEaX,MAAM;AAAA"}},"mtime":1666013865216},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\database\\\\user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserModel = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst UserSchema = new _mongoose.default.Schema({\n  fullName: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true\n  },\n  password: {\n    type: String\n  }\n}, {\n  timestamps: true\n});\n\n//attachments\nUserSchema.methods.generateJwtToken = function () {\n  return _jsonwebtoken.default.sign({\n    user: this._id.toString()\n  }, \"process.env.SECRET_KEY\");\n};\n\n//helper function\nUserSchema.statics.findByEmail = async ({\n  email\n}) => {\n  const checkUserByEmail = await UserModel.findOne({\n    email\n  });\n  if (checkUserByEmail) {\n    throw new Error(\"User Already Exists...!\");\n  }\n  return false;\n};\nUserSchema.statics.findByEmailAndPassword = async ({\n  email,\n  password\n}) => {\n  const user = await UserModel.findOne({\n    email\n  });\n  if (!user) throw new Error(\"User does not exist !!!\");\n\n  // Compare Password\n  const doesPasswordMatch = _bcryptjs.default.compare(password, user.password);\n  if (!doesPasswordMatch) throw new Error(\"Invalid Credentials !!!\");\n  return user;\n};\n\n// Password Encryption\nUserSchema.pre(\"save\", function (next) {\n  const user = this;\n\n  // password is modified\n  if (!user.isModified(\"password\")) return next();\n\n  // generate bcrypt salt\n  _bcryptjs.default.genSalt(8, (error, salt) => {\n    if (error) return next(error);\n\n    // hash the password\n    _bcryptjs.default.hash(user.password, salt, (error, hash) => {\n      if (error) return next(error);\n\n      // assigning hashed password\n      user.password = hash;\n      return next();\n    });\n  });\n});\nconst UserModel = _mongoose.default.model(\"users\", UserSchema);\nexports.UserModel = UserModel;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJmdWxsTmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImVtYWlsIiwicGFzc3dvcmQiLCJ0aW1lc3RhbXBzIiwibWV0aG9kcyIsImdlbmVyYXRlSnd0VG9rZW4iLCJqd3QiLCJzaWduIiwidXNlciIsIl9pZCIsInRvU3RyaW5nIiwic3RhdGljcyIsImZpbmRCeUVtYWlsIiwiY2hlY2tVc2VyQnlFbWFpbCIsIlVzZXJNb2RlbCIsImZpbmRPbmUiLCJFcnJvciIsImZpbmRCeUVtYWlsQW5kUGFzc3dvcmQiLCJkb2VzUGFzc3dvcmRNYXRjaCIsImJjcnlwdCIsImNvbXBhcmUiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsImdlblNhbHQiLCJlcnJvciIsInNhbHQiLCJoYXNoIiwibW9kZWwiXSwic291cmNlUm9vdCI6IkQ6XFxwcm9qZWN0c1xcZGVzaWduLXdlYi1hcHBsaWNhdGlvblxcc2VydmVyXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJ1c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcblxyXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgICBmdWxsTmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBlbWFpbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcgfSxcclxuICB9LFxyXG4gIHtcclxuICAgIHRpbWVzdGFtcHM6IHRydWUsXHJcbiAgfVxyXG4pO1xyXG5cclxuLy9hdHRhY2htZW50c1xyXG5Vc2VyU2NoZW1hLm1ldGhvZHMuZ2VuZXJhdGVKd3RUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gand0LnNpZ24oeyB1c2VyOiB0aGlzLl9pZC50b1N0cmluZygpIH0sIFwicHJvY2Vzcy5lbnYuU0VDUkVUX0tFWVwiKTtcclxufTtcclxuXHJcbi8vaGVscGVyIGZ1bmN0aW9uXHJcblVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlFbWFpbCA9IGFzeW5jICh7IGVtYWlsIH0pID0+IHtcclxuICBjb25zdCBjaGVja1VzZXJCeUVtYWlsID0gYXdhaXQgVXNlck1vZGVsLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuXHJcbiAgaWYgKGNoZWNrVXNlckJ5RW1haWwpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgQWxyZWFkeSBFeGlzdHMuLi4hXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuVXNlclNjaGVtYS5zdGF0aWNzLmZpbmRCeUVtYWlsQW5kUGFzc3dvcmQgPSBhc3luYyAoeyBlbWFpbCwgcGFzc3dvcmQgfSkgPT4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyTW9kZWwuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG4gIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBkb2VzIG5vdCBleGlzdCAhISFcIik7XHJcblxyXG4gIC8vIENvbXBhcmUgUGFzc3dvcmRcclxuICBjb25zdCBkb2VzUGFzc3dvcmRNYXRjaCA9IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcclxuXHJcbiAgaWYgKCFkb2VzUGFzc3dvcmRNYXRjaCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDcmVkZW50aWFscyAhISFcIik7XHJcblxyXG4gIHJldHVybiB1c2VyO1xyXG59O1xyXG5cclxuLy8gUGFzc3dvcmQgRW5jcnlwdGlvblxyXG5Vc2VyU2NoZW1hLnByZShcInNhdmVcIiwgZnVuY3Rpb24gKG5leHQpIHtcclxuICBjb25zdCB1c2VyID0gdGhpcztcclxuXHJcbiAgLy8gcGFzc3dvcmQgaXMgbW9kaWZpZWRcclxuICBpZiAoIXVzZXIuaXNNb2RpZmllZChcInBhc3N3b3JkXCIpKSByZXR1cm4gbmV4dCgpO1xyXG5cclxuICAvLyBnZW5lcmF0ZSBiY3J5cHQgc2FsdFxyXG4gIGJjcnlwdC5nZW5TYWx0KDgsIChlcnJvciwgc2FsdCkgPT4ge1xyXG4gICAgaWYgKGVycm9yKSByZXR1cm4gbmV4dChlcnJvcik7XHJcblxyXG4gICAgLy8gaGFzaCB0aGUgcGFzc3dvcmRcclxuICAgIGJjcnlwdC5oYXNoKHVzZXIucGFzc3dvcmQsIHNhbHQsIChlcnJvciwgaGFzaCkgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHJldHVybiBuZXh0KGVycm9yKTtcclxuXHJcbiAgICAgIC8vIGFzc2lnbmluZyBoYXNoZWQgcGFzc3dvcmRcclxuICAgICAgdXNlci5wYXNzd29yZCA9IGhhc2g7XHJcbiAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgVXNlck1vZGVsID0gbW9uZ29vc2UubW9kZWwoXCJ1c2Vyc1wiLCBVc2VyU2NoZW1hKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBK0I7QUFFL0IsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FDcEM7RUFDRUMsUUFBUSxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzFDQyxLQUFLLEVBQUU7SUFBRUgsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdkNFLFFBQVEsRUFBRTtJQUFFSixJQUFJLEVBQUVDO0VBQU87QUFDM0IsQ0FBQyxFQUNEO0VBQ0VJLFVBQVUsRUFBRTtBQUNkLENBQUMsQ0FDRjs7QUFFRDtBQUNBVCxVQUFVLENBQUNVLE9BQU8sQ0FBQ0MsZ0JBQWdCLEdBQUcsWUFBWTtFQUNoRCxPQUFPQyxxQkFBRyxDQUFDQyxJQUFJLENBQUM7SUFBRUMsSUFBSSxFQUFFLElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRO0VBQUcsQ0FBQyxFQUFFLHdCQUF3QixDQUFDO0FBQzFFLENBQUM7O0FBRUQ7QUFDQWhCLFVBQVUsQ0FBQ2lCLE9BQU8sQ0FBQ0MsV0FBVyxHQUFHLE9BQU87RUFBRVg7QUFBTSxDQUFDLEtBQUs7RUFDcEQsTUFBTVksZ0JBQWdCLEdBQUcsTUFBTUMsU0FBUyxDQUFDQyxPQUFPLENBQUM7SUFBRWQ7RUFBTSxDQUFDLENBQUM7RUFFM0QsSUFBSVksZ0JBQWdCLEVBQUU7SUFDcEIsTUFBTSxJQUFJRyxLQUFLLENBQUMseUJBQXlCLENBQUM7RUFDNUM7RUFFQSxPQUFPLEtBQUs7QUFDZCxDQUFDO0FBRUR0QixVQUFVLENBQUNpQixPQUFPLENBQUNNLHNCQUFzQixHQUFHLE9BQU87RUFBRWhCLEtBQUs7RUFBRUM7QUFBUyxDQUFDLEtBQUs7RUFDekUsTUFBTU0sSUFBSSxHQUFHLE1BQU1NLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDO0lBQUVkO0VBQU0sQ0FBQyxDQUFDO0VBQy9DLElBQUksQ0FBQ08sSUFBSSxFQUFFLE1BQU0sSUFBSVEsS0FBSyxDQUFDLHlCQUF5QixDQUFDOztFQUVyRDtFQUNBLE1BQU1FLGlCQUFpQixHQUFHQyxpQkFBTSxDQUFDQyxPQUFPLENBQUNsQixRQUFRLEVBQUVNLElBQUksQ0FBQ04sUUFBUSxDQUFDO0VBRWpFLElBQUksQ0FBQ2dCLGlCQUFpQixFQUFFLE1BQU0sSUFBSUYsS0FBSyxDQUFDLHlCQUF5QixDQUFDO0VBRWxFLE9BQU9SLElBQUk7QUFDYixDQUFDOztBQUVEO0FBQ0FkLFVBQVUsQ0FBQzJCLEdBQUcsQ0FBQyxNQUFNLEVBQUUsVUFBVUMsSUFBSSxFQUFFO0VBQ3JDLE1BQU1kLElBQUksR0FBRyxJQUFJOztFQUVqQjtFQUNBLElBQUksQ0FBQ0EsSUFBSSxDQUFDZSxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBT0QsSUFBSSxFQUFFOztFQUUvQztFQUNBSCxpQkFBTSxDQUFDSyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUNDLEtBQUssRUFBRUMsSUFBSSxLQUFLO0lBQ2pDLElBQUlELEtBQUssRUFBRSxPQUFPSCxJQUFJLENBQUNHLEtBQUssQ0FBQzs7SUFFN0I7SUFDQU4saUJBQU0sQ0FBQ1EsSUFBSSxDQUFDbkIsSUFBSSxDQUFDTixRQUFRLEVBQUV3QixJQUFJLEVBQUUsQ0FBQ0QsS0FBSyxFQUFFRSxJQUFJLEtBQUs7TUFDaEQsSUFBSUYsS0FBSyxFQUFFLE9BQU9ILElBQUksQ0FBQ0csS0FBSyxDQUFDOztNQUU3QjtNQUNBakIsSUFBSSxDQUFDTixRQUFRLEdBQUd5QixJQUFJO01BQ3BCLE9BQU9MLElBQUksRUFBRTtJQUNmLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVLLE1BQU1SLFNBQVMsR0FBR25CLGlCQUFRLENBQUNpQyxLQUFLLENBQUMsT0FBTyxFQUFFbEMsVUFBVSxDQUFDO0FBQUMifQ==","map":{"version":3,"names":["UserSchema","mongoose","Schema","fullName","type","String","required","email","password","timestamps","methods","generateJwtToken","jwt","sign","user","_id","toString","statics","findByEmail","checkUserByEmail","UserModel","findOne","Error","findByEmailAndPassword","doesPasswordMatch","bcrypt","compare","pre","next","isModified","genSalt","error","salt","hash","model"],"sourceRoot":"D:\\projects\\design-web-application\\server\\database\\","sources":["user.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nconst UserSchema = new mongoose.Schema(\r\n  {\r\n    fullName: { type: String, required: true },\r\n    email: { type: String, required: true },\r\n    password: { type: String },\r\n  },\r\n  {\r\n    timestamps: true,\r\n  }\r\n);\r\n\r\n//attachments\r\nUserSchema.methods.generateJwtToken = function () {\r\n  return jwt.sign({ user: this._id.toString() }, \"process.env.SECRET_KEY\");\r\n};\r\n\r\n//helper function\r\nUserSchema.statics.findByEmail = async ({ email }) => {\r\n  const checkUserByEmail = await UserModel.findOne({ email });\r\n\r\n  if (checkUserByEmail) {\r\n    throw new Error(\"User Already Exists...!\");\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nUserSchema.statics.findByEmailAndPassword = async ({ email, password }) => {\r\n  const user = await UserModel.findOne({ email });\r\n  if (!user) throw new Error(\"User does not exist !!!\");\r\n\r\n  // Compare Password\r\n  const doesPasswordMatch = bcrypt.compare(password, user.password);\r\n\r\n  if (!doesPasswordMatch) throw new Error(\"Invalid Credentials !!!\");\r\n\r\n  return user;\r\n};\r\n\r\n// Password Encryption\r\nUserSchema.pre(\"save\", function (next) {\r\n  const user = this;\r\n\r\n  // password is modified\r\n  if (!user.isModified(\"password\")) return next();\r\n\r\n  // generate bcrypt salt\r\n  bcrypt.genSalt(8, (error, salt) => {\r\n    if (error) return next(error);\r\n\r\n    // hash the password\r\n    bcrypt.hash(user.password, salt, (error, hash) => {\r\n      if (error) return next(error);\r\n\r\n      // assigning hashed password\r\n      user.password = hash;\r\n      return next();\r\n    });\r\n  });\r\n});\r\n\r\nexport const UserModel = mongoose.model(\"users\", UserSchema);\r\n"],"mappings":";;;;;;AAAA;AACA;AACA;AAA+B;AAE/B,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACpC;EACEC,QAAQ,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CC,KAAK,EAAE;IAAEH,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACvCE,QAAQ,EAAE;IAAEJ,IAAI,EAAEC;EAAO;AAC3B,CAAC,EACD;EACEI,UAAU,EAAE;AACd,CAAC,CACF;;AAED;AACAT,UAAU,CAACU,OAAO,CAACC,gBAAgB,GAAG,YAAY;EAChD,OAAOC,qBAAG,CAACC,IAAI,CAAC;IAAEC,IAAI,EAAE,IAAI,CAACC,GAAG,CAACC,QAAQ;EAAG,CAAC,EAAE,wBAAwB,CAAC;AAC1E,CAAC;;AAED;AACAhB,UAAU,CAACiB,OAAO,CAACC,WAAW,GAAG,OAAO;EAAEX;AAAM,CAAC,KAAK;EACpD,MAAMY,gBAAgB,GAAG,MAAMC,SAAS,CAACC,OAAO,CAAC;IAAEd;EAAM,CAAC,CAAC;EAE3D,IAAIY,gBAAgB,EAAE;IACpB,MAAM,IAAIG,KAAK,CAAC,yBAAyB,CAAC;EAC5C;EAEA,OAAO,KAAK;AACd,CAAC;AAEDtB,UAAU,CAACiB,OAAO,CAACM,sBAAsB,GAAG,OAAO;EAAEhB,KAAK;EAAEC;AAAS,CAAC,KAAK;EACzE,MAAMM,IAAI,GAAG,MAAMM,SAAS,CAACC,OAAO,CAAC;IAAEd;EAAM,CAAC,CAAC;EAC/C,IAAI,CAACO,IAAI,EAAE,MAAM,IAAIQ,KAAK,CAAC,yBAAyB,CAAC;;EAErD;EACA,MAAME,iBAAiB,GAAGC,iBAAM,CAACC,OAAO,CAAClB,QAAQ,EAAEM,IAAI,CAACN,QAAQ,CAAC;EAEjE,IAAI,CAACgB,iBAAiB,EAAE,MAAM,IAAIF,KAAK,CAAC,yBAAyB,CAAC;EAElE,OAAOR,IAAI;AACb,CAAC;;AAED;AACAd,UAAU,CAAC2B,GAAG,CAAC,MAAM,EAAE,UAAUC,IAAI,EAAE;EACrC,MAAMd,IAAI,GAAG,IAAI;;EAEjB;EACA,IAAI,CAACA,IAAI,CAACe,UAAU,CAAC,UAAU,CAAC,EAAE,OAAOD,IAAI,EAAE;;EAE/C;EACAH,iBAAM,CAACK,OAAO,CAAC,CAAC,EAAE,CAACC,KAAK,EAAEC,IAAI,KAAK;IACjC,IAAID,KAAK,EAAE,OAAOH,IAAI,CAACG,KAAK,CAAC;;IAE7B;IACAN,iBAAM,CAACQ,IAAI,CAACnB,IAAI,CAACN,QAAQ,EAAEwB,IAAI,EAAE,CAACD,KAAK,EAAEE,IAAI,KAAK;MAChD,IAAIF,KAAK,EAAE,OAAOH,IAAI,CAACG,KAAK,CAAC;;MAE7B;MACAjB,IAAI,CAACN,QAAQ,GAAGyB,IAAI;MACpB,OAAOL,IAAI,EAAE;IACf,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC;AAEK,MAAMR,SAAS,GAAGnB,iBAAQ,CAACiC,KAAK,CAAC,OAAO,EAAElC,UAAU,CAAC;AAAC"}},"mtime":1666017068237},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\config\\\\route.config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportJwt = _interopRequireDefault(require(\"passport-jwt\"));\nvar _user = require(\"../database/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst JwtStrategy = _passportJwt.default.Strategy;\nconst ExtractJwt = _passportJwt.default.ExtractJwt;\nconst options = {\n  jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n  secretOrKey: \"process.env.SECRET_KEY\"\n};\nvar _default = passport => {\n  passport.use(new JwtStrategy(options, async (jwt__payload, done) => {\n    try {\n      const doesUserExist = await _user.UserModel.findById(jwt__payload.user);\n      if (!doesUserExist) return done(null, false);\n      return done(null, doesUserExist);\n    } catch (error) {\n      throw new Error(error);\n    }\n  }));\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKd3RTdHJhdGVneSIsIkp3dFBhc3Nwb3J0IiwiU3RyYXRlZ3kiLCJFeHRyYWN0Snd0Iiwib3B0aW9ucyIsImp3dEZyb21SZXF1ZXN0IiwiZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuIiwic2VjcmV0T3JLZXkiLCJwYXNzcG9ydCIsInVzZSIsImp3dF9fcGF5bG9hZCIsImRvbmUiLCJkb2VzVXNlckV4aXN0IiwiVXNlck1vZGVsIiwiZmluZEJ5SWQiLCJ1c2VyIiwiZXJyb3IiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiRDpcXHByb2plY3RzXFxkZXNpZ24td2ViLWFwcGxpY2F0aW9uXFxzZXJ2ZXJcXGNvbmZpZ1xcIiwic291cmNlcyI6WyJyb3V0ZS5jb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xyXG5pbXBvcnQgSnd0UGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0LWp3dFwiO1xyXG5cclxuaW1wb3J0IHsgVXNlck1vZGVsIH0gZnJvbSBcIi4uL2RhdGFiYXNlL3VzZXJcIjtcclxuXHJcbmNvbnN0IEp3dFN0cmF0ZWd5ID0gSnd0UGFzc3BvcnQuU3RyYXRlZ3k7XHJcbmNvbnN0IEV4dHJhY3RKd3QgPSBKd3RQYXNzcG9ydC5FeHRyYWN0Snd0O1xyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBqd3RGcm9tUmVxdWVzdDogRXh0cmFjdEp3dC5mcm9tQXV0aEhlYWRlckFzQmVhcmVyVG9rZW4oKSxcclxuICBzZWNyZXRPcktleTogXCJwcm9jZXNzLmVudi5TRUNSRVRfS0VZXCIsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCAocGFzc3BvcnQpID0+IHtcclxuICBwYXNzcG9ydC51c2UoXHJcbiAgICBuZXcgSnd0U3RyYXRlZ3kob3B0aW9ucywgYXN5bmMgKGp3dF9fcGF5bG9hZCwgZG9uZSkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRvZXNVc2VyRXhpc3QgPSBhd2FpdCBVc2VyTW9kZWwuZmluZEJ5SWQoand0X19wYXlsb2FkLnVzZXIpO1xyXG4gICAgICAgIGlmICghZG9lc1VzZXJFeGlzdCkgcmV0dXJuIGRvbmUobnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiBkb25lKG51bGwsIGRvZXNVc2VyRXhpc3QpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgKTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFBNkM7QUFFN0MsTUFBTUEsV0FBVyxHQUFHQyxvQkFBVyxDQUFDQyxRQUFRO0FBQ3hDLE1BQU1DLFVBQVUsR0FBR0Ysb0JBQVcsQ0FBQ0UsVUFBVTtBQUV6QyxNQUFNQyxPQUFPLEdBQUc7RUFDZEMsY0FBYyxFQUFFRixVQUFVLENBQUNHLDJCQUEyQixFQUFFO0VBQ3hEQyxXQUFXLEVBQUU7QUFDZixDQUFDO0FBQUMsZUFFY0MsUUFBUSxJQUFLO0VBQzNCQSxRQUFRLENBQUNDLEdBQUcsQ0FDVixJQUFJVCxXQUFXLENBQUNJLE9BQU8sRUFBRSxPQUFPTSxZQUFZLEVBQUVDLElBQUksS0FBSztJQUNyRCxJQUFJO01BQ0YsTUFBTUMsYUFBYSxHQUFHLE1BQU1DLGVBQVMsQ0FBQ0MsUUFBUSxDQUFDSixZQUFZLENBQUNLLElBQUksQ0FBQztNQUNqRSxJQUFJLENBQUNILGFBQWEsRUFBRSxPQUFPRCxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQztNQUM1QyxPQUFPQSxJQUFJLENBQUMsSUFBSSxFQUFFQyxhQUFhLENBQUM7SUFDbEMsQ0FBQyxDQUFDLE9BQU9JLEtBQUssRUFBRTtNQUNkLE1BQU0sSUFBSUMsS0FBSyxDQUFDRCxLQUFLLENBQUM7SUFDeEI7RUFDRixDQUFDLENBQUMsQ0FDSDtBQUNILENBQUM7QUFBQSJ9","map":{"version":3,"names":["JwtStrategy","JwtPassport","Strategy","ExtractJwt","options","jwtFromRequest","fromAuthHeaderAsBearerToken","secretOrKey","passport","use","jwt__payload","done","doesUserExist","UserModel","findById","user","error","Error"],"sourceRoot":"D:\\projects\\design-web-application\\server\\config\\","sources":["route.config.js"],"sourcesContent":["import passport from \"passport\";\r\nimport JwtPassport from \"passport-jwt\";\r\n\r\nimport { UserModel } from \"../database/user\";\r\n\r\nconst JwtStrategy = JwtPassport.Strategy;\r\nconst ExtractJwt = JwtPassport.ExtractJwt;\r\n\r\nconst options = {\r\n  jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\r\n  secretOrKey: \"process.env.SECRET_KEY\",\r\n};\r\n\r\nexport default (passport) => {\r\n  passport.use(\r\n    new JwtStrategy(options, async (jwt__payload, done) => {\r\n      try {\r\n        const doesUserExist = await UserModel.findById(jwt__payload.user);\r\n        if (!doesUserExist) return done(null, false);\r\n        return done(null, doesUserExist);\r\n      } catch (error) {\r\n        throw new Error(error);\r\n      }\r\n    })\r\n  );\r\n};\r\n"],"mappings":";;;;;;AAAA;AACA;AAEA;AAA6C;AAE7C,MAAMA,WAAW,GAAGC,oBAAW,CAACC,QAAQ;AACxC,MAAMC,UAAU,GAAGF,oBAAW,CAACE,UAAU;AAEzC,MAAMC,OAAO,GAAG;EACdC,cAAc,EAAEF,UAAU,CAACG,2BAA2B,EAAE;EACxDC,WAAW,EAAE;AACf,CAAC;AAAC,eAEcC,QAAQ,IAAK;EAC3BA,QAAQ,CAACC,GAAG,CACV,IAAIT,WAAW,CAACI,OAAO,EAAE,OAAOM,YAAY,EAAEC,IAAI,KAAK;IACrD,IAAI;MACF,MAAMC,aAAa,GAAG,MAAMC,eAAS,CAACC,QAAQ,CAACJ,YAAY,CAACK,IAAI,CAAC;MACjE,IAAI,CAACH,aAAa,EAAE,OAAOD,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;MAC5C,OAAOA,IAAI,CAAC,IAAI,EAAEC,aAAa,CAAC;IAClC,CAAC,CAAC,OAAOI,KAAK,EAAE;MACd,MAAM,IAAIC,KAAK,CAACD,KAAK,CAAC;IACxB;EACF,CAAC,CAAC,CACH;AACH,CAAC;AAAA"}},"mtime":1666014605504},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\config\\\\googleOAuth.config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _passportGoogleOauth = _interopRequireDefault(require(\"passport-google-oauth2\"));\nvar _user = require(\"../database/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nconst GoogleStrategy = _passportGoogleOauth.default.Strategy;\nvar _default = passport => {\n  passport.use(new GoogleStrategy({\n    clientID: process.env.GOOGLE_CLIENT_ID,\n    clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n    callbackURL: \"http://localhost:4000/auth/google/callback\"\n  }, async (accessToken, refreshToken, profile, done) => {\n    const newUser = {\n      fullName: profile.displayName,\n      email: profile.emails[0].value,\n      profilePic: profile.picture[0].value\n    };\n    try {\n      const user = await _user.UserModel.findOne({\n        email: newUser.email\n      });\n      if (user) {\n        const token = user.generateJwtToken();\n        done(null, {\n          user,\n          token\n        });\n      } else {\n        const user = await _user.UserModel.create(newUser);\n        const token = user.generateJwtToken();\n        done(null, {\n          user,\n          token\n        });\n      }\n    } catch (error) {\n      done(error, null);\n    }\n  }));\n  passport.serializeUser((userData, done) => done(null, _objectSpread({}, userData)));\n  passport.deserializeUser((id, done) => done(null, id));\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHb29nbGVTdHJhdGVneSIsImdvb2dsZU9BdXRoIiwiU3RyYXRlZ3kiLCJwYXNzcG9ydCIsInVzZSIsImNsaWVudElEIiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsImNhbGxiYWNrVVJMIiwiYWNjZXNzVG9rZW4iLCJyZWZyZXNoVG9rZW4iLCJwcm9maWxlIiwiZG9uZSIsIm5ld1VzZXIiLCJmdWxsTmFtZSIsImRpc3BsYXlOYW1lIiwiZW1haWwiLCJlbWFpbHMiLCJ2YWx1ZSIsInByb2ZpbGVQaWMiLCJwaWN0dXJlIiwidXNlciIsIlVzZXJNb2RlbCIsImZpbmRPbmUiLCJ0b2tlbiIsImdlbmVyYXRlSnd0VG9rZW4iLCJjcmVhdGUiLCJlcnJvciIsInNlcmlhbGl6ZVVzZXIiLCJ1c2VyRGF0YSIsImRlc2VyaWFsaXplVXNlciIsImlkIl0sInNvdXJjZVJvb3QiOiJEOlxccHJvamVjdHNcXGRlc2lnbi13ZWItYXBwbGljYXRpb25cXHNlcnZlclxcY29uZmlnXFwiLCJzb3VyY2VzIjpbImdvb2dsZU9BdXRoLmNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ29vZ2xlT0F1dGggZnJvbSBcInBhc3Nwb3J0LWdvb2dsZS1vYXV0aDJcIjtcclxuXHJcbmltcG9ydCB7IFVzZXJNb2RlbCB9IGZyb20gXCIuLi9kYXRhYmFzZS91c2VyXCI7XHJcblxyXG5jb25zdCBHb29nbGVTdHJhdGVneSA9IGdvb2dsZU9BdXRoLlN0cmF0ZWd5O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKHBhc3Nwb3J0KSA9PiB7XHJcbiAgcGFzc3BvcnQudXNlKFxyXG4gICAgbmV3IEdvb2dsZVN0cmF0ZWd5KFxyXG4gICAgICB7XHJcbiAgICAgICAgY2xpZW50SUQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQsXHJcbiAgICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcclxuICAgICAgICBjYWxsYmFja1VSTDogXCJodHRwOi8vbG9jYWxob3N0OjQwMDAvYXV0aC9nb29nbGUvY2FsbGJhY2tcIixcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGFzeW5jIChhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBwcm9maWxlLCBkb25lKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3VXNlciA9IHtcclxuICAgICAgICAgIGZ1bGxOYW1lOiBwcm9maWxlLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWxzWzBdLnZhbHVlLFxyXG4gICAgICAgICAgcHJvZmlsZVBpYzogcHJvZmlsZS5waWN0dXJlWzBdLnZhbHVlLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlck1vZGVsLmZpbmRPbmUoeyBlbWFpbDogbmV3VXNlci5lbWFpbCB9KTtcclxuXHJcbiAgICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHVzZXIuZ2VuZXJhdGVKd3RUb2tlbigpO1xyXG4gICAgICAgICAgICBkb25lKG51bGwsIHsgdXNlciwgdG9rZW4gfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlck1vZGVsLmNyZWF0ZShuZXdVc2VyKTtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSB1c2VyLmdlbmVyYXRlSnd0VG9rZW4oKTtcclxuXHJcbiAgICAgICAgICAgIGRvbmUobnVsbCwgeyB1c2VyLCB0b2tlbiB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgZG9uZShlcnJvciwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgKTtcclxuXHJcbiAgcGFzc3BvcnQuc2VyaWFsaXplVXNlcigodXNlckRhdGEsIGRvbmUpID0+IGRvbmUobnVsbCwgeyAuLi51c2VyRGF0YSB9KSk7XHJcbiAgcGFzc3BvcnQuZGVzZXJpYWxpemVVc2VyKChpZCwgZG9uZSkgPT4gZG9uZShudWxsLCBpZCkpO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBRUE7QUFBNkM7QUFBQTtBQUFBO0FBQUE7QUFFN0MsTUFBTUEsY0FBYyxHQUFHQyw0QkFBVyxDQUFDQyxRQUFRO0FBQUMsZUFFNUJDLFFBQVEsSUFBSztFQUMzQkEsUUFBUSxDQUFDQyxHQUFHLENBQ1YsSUFBSUosY0FBYyxDQUNoQjtJQUNFSyxRQUFRLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxnQkFBZ0I7SUFDdENDLFlBQVksRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLG9CQUFvQjtJQUM5Q0MsV0FBVyxFQUFFO0VBQ2YsQ0FBQyxFQUVELE9BQU9DLFdBQVcsRUFBRUMsWUFBWSxFQUFFQyxPQUFPLEVBQUVDLElBQUksS0FBSztJQUNsRCxNQUFNQyxPQUFPLEdBQUc7TUFDZEMsUUFBUSxFQUFFSCxPQUFPLENBQUNJLFdBQVc7TUFDN0JDLEtBQUssRUFBRUwsT0FBTyxDQUFDTSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNDLEtBQUs7TUFDOUJDLFVBQVUsRUFBRVIsT0FBTyxDQUFDUyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNGO0lBQ2pDLENBQUM7SUFFRCxJQUFJO01BQ0YsTUFBTUcsSUFBSSxHQUFHLE1BQU1DLGVBQVMsQ0FBQ0MsT0FBTyxDQUFDO1FBQUVQLEtBQUssRUFBRUgsT0FBTyxDQUFDRztNQUFNLENBQUMsQ0FBQztNQUU5RCxJQUFJSyxJQUFJLEVBQUU7UUFDUixNQUFNRyxLQUFLLEdBQUdILElBQUksQ0FBQ0ksZ0JBQWdCLEVBQUU7UUFDckNiLElBQUksQ0FBQyxJQUFJLEVBQUU7VUFBRVMsSUFBSTtVQUFFRztRQUFNLENBQUMsQ0FBQztNQUM3QixDQUFDLE1BQU07UUFDTCxNQUFNSCxJQUFJLEdBQUcsTUFBTUMsZUFBUyxDQUFDSSxNQUFNLENBQUNiLE9BQU8sQ0FBQztRQUM1QyxNQUFNVyxLQUFLLEdBQUdILElBQUksQ0FBQ0ksZ0JBQWdCLEVBQUU7UUFFckNiLElBQUksQ0FBQyxJQUFJLEVBQUU7VUFBRVMsSUFBSTtVQUFFRztRQUFNLENBQUMsQ0FBQztNQUM3QjtJQUNGLENBQUMsQ0FBQyxPQUFPRyxLQUFLLEVBQUU7TUFDZGYsSUFBSSxDQUFDZSxLQUFLLEVBQUUsSUFBSSxDQUFDO0lBQ25CO0VBQ0YsQ0FBQyxDQUNGLENBQ0Y7RUFFRDNCLFFBQVEsQ0FBQzRCLGFBQWEsQ0FBQyxDQUFDQyxRQUFRLEVBQUVqQixJQUFJLEtBQUtBLElBQUksQ0FBQyxJQUFJLG9CQUFPaUIsUUFBUSxFQUFHLENBQUM7RUFDdkU3QixRQUFRLENBQUM4QixlQUFlLENBQUMsQ0FBQ0MsRUFBRSxFQUFFbkIsSUFBSSxLQUFLQSxJQUFJLENBQUMsSUFBSSxFQUFFbUIsRUFBRSxDQUFDLENBQUM7QUFDeEQsQ0FBQztBQUFBIn0=","map":{"version":3,"names":["GoogleStrategy","googleOAuth","Strategy","passport","use","clientID","process","env","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_CLIENT_SECRET","callbackURL","accessToken","refreshToken","profile","done","newUser","fullName","displayName","email","emails","value","profilePic","picture","user","UserModel","findOne","token","generateJwtToken","create","error","serializeUser","userData","deserializeUser","id"],"sourceRoot":"D:\\projects\\design-web-application\\server\\config\\","sources":["googleOAuth.config.js"],"sourcesContent":["import googleOAuth from \"passport-google-oauth2\";\r\n\r\nimport { UserModel } from \"../database/user\";\r\n\r\nconst GoogleStrategy = googleOAuth.Strategy;\r\n\r\nexport default (passport) => {\r\n  passport.use(\r\n    new GoogleStrategy(\r\n      {\r\n        clientID: process.env.GOOGLE_CLIENT_ID,\r\n        clientSecret: process.env.GOOGLE_CLIENT_SECRET,\r\n        callbackURL: \"http://localhost:4000/auth/google/callback\",\r\n      },\r\n\r\n      async (accessToken, refreshToken, profile, done) => {\r\n        const newUser = {\r\n          fullName: profile.displayName,\r\n          email: profile.emails[0].value,\r\n          profilePic: profile.picture[0].value,\r\n        };\r\n\r\n        try {\r\n          const user = await UserModel.findOne({ email: newUser.email });\r\n\r\n          if (user) {\r\n            const token = user.generateJwtToken();\r\n            done(null, { user, token });\r\n          } else {\r\n            const user = await UserModel.create(newUser);\r\n            const token = user.generateJwtToken();\r\n\r\n            done(null, { user, token });\r\n          }\r\n        } catch (error) {\r\n          done(error, null);\r\n        }\r\n      }\r\n    )\r\n  );\r\n\r\n  passport.serializeUser((userData, done) => done(null, { ...userData }));\r\n  passport.deserializeUser((id, done) => done(null, id));\r\n};\r\n"],"mappings":";;;;;;AAAA;AAEA;AAA6C;AAAA;AAAA;AAAA;AAE7C,MAAMA,cAAc,GAAGC,4BAAW,CAACC,QAAQ;AAAC,eAE5BC,QAAQ,IAAK;EAC3BA,QAAQ,CAACC,GAAG,CACV,IAAIJ,cAAc,CAChB;IACEK,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;IACtCC,YAAY,EAAEH,OAAO,CAACC,GAAG,CAACG,oBAAoB;IAC9CC,WAAW,EAAE;EACf,CAAC,EAED,OAAOC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,IAAI,KAAK;IAClD,MAAMC,OAAO,GAAG;MACdC,QAAQ,EAAEH,OAAO,CAACI,WAAW;MAC7BC,KAAK,EAAEL,OAAO,CAACM,MAAM,CAAC,CAAC,CAAC,CAACC,KAAK;MAC9BC,UAAU,EAAER,OAAO,CAACS,OAAO,CAAC,CAAC,CAAC,CAACF;IACjC,CAAC;IAED,IAAI;MACF,MAAMG,IAAI,GAAG,MAAMC,eAAS,CAACC,OAAO,CAAC;QAAEP,KAAK,EAAEH,OAAO,CAACG;MAAM,CAAC,CAAC;MAE9D,IAAIK,IAAI,EAAE;QACR,MAAMG,KAAK,GAAGH,IAAI,CAACI,gBAAgB,EAAE;QACrCb,IAAI,CAAC,IAAI,EAAE;UAAES,IAAI;UAAEG;QAAM,CAAC,CAAC;MAC7B,CAAC,MAAM;QACL,MAAMH,IAAI,GAAG,MAAMC,eAAS,CAACI,MAAM,CAACb,OAAO,CAAC;QAC5C,MAAMW,KAAK,GAAGH,IAAI,CAACI,gBAAgB,EAAE;QAErCb,IAAI,CAAC,IAAI,EAAE;UAAES,IAAI;UAAEG;QAAM,CAAC,CAAC;MAC7B;IACF,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdf,IAAI,CAACe,KAAK,EAAE,IAAI,CAAC;IACnB;EACF,CAAC,CACF,CACF;EAED3B,QAAQ,CAAC4B,aAAa,CAAC,CAACC,QAAQ,EAAEjB,IAAI,KAAKA,IAAI,CAAC,IAAI,oBAAOiB,QAAQ,EAAG,CAAC;EACvE7B,QAAQ,CAAC8B,eAAe,CAAC,CAACC,EAAE,EAAEnB,IAAI,KAAKA,IAAI,CAAC,IAAI,EAAEmB,EAAE,CAAC,CAAC;AACxD,CAAC;AAAA"}},"mtime":1666011009585},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\api\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\api\\\\auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _user = require(\"../database/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst Router = _express.default.Router();\n\n/**\r\n * Route     /signup\r\n * Desc      Create new account\r\n * Params    none\r\n * Accesss   Public\r\n * Method    POST\r\n */\nRouter.post(\"/signup\", async (req, res) => {\n  try {\n    await _user.UserModel.findByEmail(req.body.credentials);\n    const newUser = await _user.UserModel.create(req.body.credentials);\n    const token = newUser.generateJwtToken();\n    return res.status(200).json({\n      token,\n      status: \"success\"\n    });\n  } catch (error) {\n    return res.status(500).json({\n      error: error.message\n    });\n  }\n});\n\n/**\r\n * Route     /signin\r\n * Desc      Login into existing account\r\n * Params    none\r\n * Accesss   Public\r\n * Method    POST\r\n */\nRouter.post(\"/signin\", async (req, res) => {\n  try {\n    const user = await _user.UserModel.findByEmailAndPassword(req.body.credentials);\n    const token = user.generateJwtToken();\n    return res.status(200).json({\n      token,\n      status: \"success\"\n    });\n  } catch (error) {\n    return res.status(500).json({\n      error: error.message\n    });\n  }\n});\nRouter.get(\"/google\", _passport.default.authenticate(\"google\", {\n  scope: [\"https://www.googleapis.com/auth/userinfo.profile\", \"https://www.googleapis.com/auth/userinfo.email\"]\n}));\nRouter.get(\"/google/callback\", _passport.default.authenticate(\"google\", {\n  failureRedirect: \"/\"\n}), (req, res) => {\n  return res.status(200).json({\n    token: req.session.passport.user.token\n  });\n\n  // return res.redirect(\n  //   `http://localhost:3000/google/${req.session.passport.user.token}`\n  // );\n});\nvar _default = Router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb3V0ZXIiLCJleHByZXNzIiwicG9zdCIsInJlcSIsInJlcyIsIlVzZXJNb2RlbCIsImZpbmRCeUVtYWlsIiwiYm9keSIsImNyZWRlbnRpYWxzIiwibmV3VXNlciIsImNyZWF0ZSIsInRva2VuIiwiZ2VuZXJhdGVKd3RUb2tlbiIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1lc3NhZ2UiLCJ1c2VyIiwiZmluZEJ5RW1haWxBbmRQYXNzd29yZCIsImdldCIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2NvcGUiLCJmYWlsdXJlUmVkaXJlY3QiLCJzZXNzaW9uIl0sInNvdXJjZVJvb3QiOiJEOlxccHJvamVjdHNcXGRlc2lnbi13ZWItYXBwbGljYXRpb25cXHNlcnZlclxcYXBpXFwiLCJzb3VyY2VzIjpbImF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xyXG5cclxuaW1wb3J0IHsgVXNlck1vZGVsIH0gZnJvbSBcIi4uL2RhdGFiYXNlL3VzZXJcIjtcclxuXHJcbmNvbnN0IFJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG4vKipcclxuICogUm91dGUgICAgIC9zaWdudXBcclxuICogRGVzYyAgICAgIENyZWF0ZSBuZXcgYWNjb3VudFxyXG4gKiBQYXJhbXMgICAgbm9uZVxyXG4gKiBBY2Nlc3NzICAgUHVibGljXHJcbiAqIE1ldGhvZCAgICBQT1NUXHJcbiAqL1xyXG5Sb3V0ZXIucG9zdChcIi9zaWdudXBcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgYXdhaXQgVXNlck1vZGVsLmZpbmRCeUVtYWlsKHJlcS5ib2R5LmNyZWRlbnRpYWxzKTtcclxuXHJcbiAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgVXNlck1vZGVsLmNyZWF0ZShyZXEuYm9keS5jcmVkZW50aWFscyk7XHJcbiAgICBjb25zdCB0b2tlbiA9IG5ld1VzZXIuZ2VuZXJhdGVKd3RUb2tlbigpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG9rZW4sIHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogUm91dGUgICAgIC9zaWduaW5cclxuICogRGVzYyAgICAgIExvZ2luIGludG8gZXhpc3RpbmcgYWNjb3VudFxyXG4gKiBQYXJhbXMgICAgbm9uZVxyXG4gKiBBY2Nlc3NzICAgUHVibGljXHJcbiAqIE1ldGhvZCAgICBQT1NUXHJcbiAqL1xyXG5Sb3V0ZXIucG9zdChcIi9zaWduaW5cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyTW9kZWwuZmluZEJ5RW1haWxBbmRQYXNzd29yZChyZXEuYm9keS5jcmVkZW50aWFscyk7XHJcbiAgICBjb25zdCB0b2tlbiA9IHVzZXIuZ2VuZXJhdGVKd3RUb2tlbigpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG9rZW4sIHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5Sb3V0ZXIuZ2V0KFxyXG4gIFwiL2dvb2dsZVwiLFxyXG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZShcImdvb2dsZVwiLCB7XHJcbiAgICBzY29wZTogW1xyXG4gICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8ucHJvZmlsZVwiLFxyXG4gICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8uZW1haWxcIixcclxuICAgIF0sXHJcbiAgfSlcclxuKTtcclxuXHJcblJvdXRlci5nZXQoXHJcbiAgXCIvZ29vZ2xlL2NhbGxiYWNrXCIsXHJcbiAgcGFzc3BvcnQuYXV0aGVudGljYXRlKFwiZ29vZ2xlXCIsIHsgZmFpbHVyZVJlZGlyZWN0OiBcIi9cIiB9KSxcclxuICAocmVxLCByZXMpID0+IHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHRva2VuOiByZXEuc2Vzc2lvbi5wYXNzcG9ydC51c2VyLnRva2VuLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gcmV0dXJuIHJlcy5yZWRpcmVjdChcclxuICAgIC8vICAgYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9nb29nbGUvJHtyZXEuc2Vzc2lvbi5wYXNzcG9ydC51c2VyLnRva2VufWBcclxuICAgIC8vICk7XHJcbiAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBQTZDO0FBRTdDLE1BQU1BLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0QsTUFBTSxFQUFFOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBQSxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdkMsSUFBSTtJQUNKLE1BQU1DLGVBQVMsQ0FBQ0MsV0FBVyxDQUFDSCxHQUFHLENBQUNJLElBQUksQ0FBQ0MsV0FBVyxDQUFDO0lBRWpELE1BQU1DLE9BQU8sR0FBRyxNQUFNSixlQUFTLENBQUNLLE1BQU0sQ0FBQ1AsR0FBRyxDQUFDSSxJQUFJLENBQUNDLFdBQVcsQ0FBQztJQUM1RCxNQUFNRyxLQUFLLEdBQUdGLE9BQU8sQ0FBQ0csZ0JBQWdCLEVBQUU7SUFDeEMsT0FBT1IsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFSCxLQUFLO01BQUVFLE1BQU0sRUFBRTtJQUFVLENBQUMsQ0FBQztFQUMzRCxDQUFDLENBQUMsT0FBT0UsS0FBSyxFQUFFO0lBQ2QsT0FBT1gsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxLQUFLLEVBQUVBLEtBQUssQ0FBQ0M7SUFBUSxDQUFDLENBQUM7RUFDdkQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQWhCLE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN6QyxJQUFJO0lBQ0YsTUFBTWEsSUFBSSxHQUFHLE1BQU1aLGVBQVMsQ0FBQ2Esc0JBQXNCLENBQUNmLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDQyxXQUFXLENBQUM7SUFDekUsTUFBTUcsS0FBSyxHQUFHTSxJQUFJLENBQUNMLGdCQUFnQixFQUFFO0lBQ3JDLE9BQU9SLEdBQUcsQ0FBQ1MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUgsS0FBSztNQUFFRSxNQUFNLEVBQUU7SUFBVSxDQUFDLENBQUM7RUFDM0QsQ0FBQyxDQUFDLE9BQU9FLEtBQUssRUFBRTtJQUNkLE9BQU9YLEdBQUcsQ0FBQ1MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFQSxLQUFLLENBQUNDO0lBQVEsQ0FBQyxDQUFDO0VBQ3ZEO0FBQ0YsQ0FBQyxDQUFDO0FBRUZoQixNQUFNLENBQUNtQixHQUFHLENBQ1IsU0FBUyxFQUNUQyxpQkFBUSxDQUFDQyxZQUFZLENBQUMsUUFBUSxFQUFFO0VBQzlCQyxLQUFLLEVBQUUsQ0FDTCxrREFBa0QsRUFDbEQsZ0RBQWdEO0FBRXBELENBQUMsQ0FBQyxDQUNIO0FBRUR0QixNQUFNLENBQUNtQixHQUFHLENBQ1Isa0JBQWtCLEVBQ2xCQyxpQkFBUSxDQUFDQyxZQUFZLENBQUMsUUFBUSxFQUFFO0VBQUVFLGVBQWUsRUFBRTtBQUFJLENBQUMsQ0FBQyxFQUN6RCxDQUFDcEIsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDWixPQUFPQSxHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQzFCSCxLQUFLLEVBQUVSLEdBQUcsQ0FBQ3FCLE9BQU8sQ0FBQ0osUUFBUSxDQUFDSCxJQUFJLENBQUNOO0VBQ25DLENBQUMsQ0FBQzs7RUFFRjtFQUNBO0VBQ0E7QUFDRixDQUFDLENBQ0Y7QUFBQyxlQUVhWCxNQUFNO0FBQUEifQ==","map":{"version":3,"names":["Router","express","post","req","res","UserModel","findByEmail","body","credentials","newUser","create","token","generateJwtToken","status","json","error","message","user","findByEmailAndPassword","get","passport","authenticate","scope","failureRedirect","session"],"sourceRoot":"D:\\projects\\design-web-application\\server\\api\\","sources":["auth.js"],"sourcesContent":["import express from \"express\";\r\nimport passport from \"passport\";\r\n\r\nimport { UserModel } from \"../database/user\";\r\n\r\nconst Router = express.Router();\r\n\r\n/**\r\n * Route     /signup\r\n * Desc      Create new account\r\n * Params    none\r\n * Accesss   Public\r\n * Method    POST\r\n */\r\nRouter.post(\"/signup\", async (req, res) => {\r\n    try {\r\n    await UserModel.findByEmail(req.body.credentials);\r\n\r\n    const newUser = await UserModel.create(req.body.credentials);\r\n    const token = newUser.generateJwtToken();\r\n    return res.status(200).json({ token, status: \"success\" });\r\n  } catch (error) {\r\n    return res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * Route     /signin\r\n * Desc      Login into existing account\r\n * Params    none\r\n * Accesss   Public\r\n * Method    POST\r\n */\r\nRouter.post(\"/signin\", async (req, res) => {\r\n  try {\r\n    const user = await UserModel.findByEmailAndPassword(req.body.credentials);\r\n    const token = user.generateJwtToken();\r\n    return res.status(200).json({ token, status: \"success\" });\r\n  } catch (error) {\r\n    return res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\nRouter.get(\r\n  \"/google\",\r\n  passport.authenticate(\"google\", {\r\n    scope: [\r\n      \"https://www.googleapis.com/auth/userinfo.profile\",\r\n      \"https://www.googleapis.com/auth/userinfo.email\",\r\n    ],\r\n  })\r\n);\r\n\r\nRouter.get(\r\n  \"/google/callback\",\r\n  passport.authenticate(\"google\", { failureRedirect: \"/\" }),\r\n  (req, res) => {\r\n    return res.status(200).json({\r\n      token: req.session.passport.user.token,\r\n    });\r\n\r\n    // return res.redirect(\r\n    //   `http://localhost:3000/google/${req.session.passport.user.token}`\r\n    // );\r\n  }\r\n);\r\n\r\nexport default Router;"],"mappings":";;;;;;AAAA;AACA;AAEA;AAA6C;AAE7C,MAAMA,MAAM,GAAGC,gBAAO,CAACD,MAAM,EAAE;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACE,IAAI,CAAC,SAAS,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACvC,IAAI;IACJ,MAAMC,eAAS,CAACC,WAAW,CAACH,GAAG,CAACI,IAAI,CAACC,WAAW,CAAC;IAEjD,MAAMC,OAAO,GAAG,MAAMJ,eAAS,CAACK,MAAM,CAACP,GAAG,CAACI,IAAI,CAACC,WAAW,CAAC;IAC5D,MAAMG,KAAK,GAAGF,OAAO,CAACG,gBAAgB,EAAE;IACxC,OAAOR,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEH,KAAK;MAAEE,MAAM,EAAE;IAAU,CAAC,CAAC;EAC3D,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,OAAOX,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEA,KAAK,CAACC;IAAQ,CAAC,CAAC;EACvD;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACAhB,MAAM,CAACE,IAAI,CAAC,SAAS,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACzC,IAAI;IACF,MAAMa,IAAI,GAAG,MAAMZ,eAAS,CAACa,sBAAsB,CAACf,GAAG,CAACI,IAAI,CAACC,WAAW,CAAC;IACzE,MAAMG,KAAK,GAAGM,IAAI,CAACL,gBAAgB,EAAE;IACrC,OAAOR,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEH,KAAK;MAAEE,MAAM,EAAE;IAAU,CAAC,CAAC;EAC3D,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,OAAOX,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEA,KAAK,CAACC;IAAQ,CAAC,CAAC;EACvD;AACF,CAAC,CAAC;AAEFhB,MAAM,CAACmB,GAAG,CACR,SAAS,EACTC,iBAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;EAC9BC,KAAK,EAAE,CACL,kDAAkD,EAClD,gDAAgD;AAEpD,CAAC,CAAC,CACH;AAEDtB,MAAM,CAACmB,GAAG,CACR,kBAAkB,EAClBC,iBAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;EAAEE,eAAe,EAAE;AAAI,CAAC,CAAC,EACzD,CAACpB,GAAG,EAAEC,GAAG,KAAK;EACZ,OAAOA,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAC1BH,KAAK,EAAER,GAAG,CAACqB,OAAO,CAACJ,QAAQ,CAACH,IAAI,CAACN;EACnC,CAAC,CAAC;;EAEF;EACA;EACA;AACF,CAAC,CACF;AAAC,eAEaX,MAAM;AAAA"}},"mtime":1666018151712},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\database\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\database\\\\user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserModel = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst UserSchema = new _mongoose.default.Schema({\n  fullName: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true\n  },\n  password: {\n    type: String\n  }\n}, {\n  timestamps: true\n});\n\n//attachments\nUserSchema.methods.generateJwtToken = function () {\n  return _jsonwebtoken.default.sign({\n    user: this._id.toString()\n  }, \"process.env.SECRET_KEY\");\n};\n\n//helper function\nUserSchema.statics.findByEmail = async ({\n  email\n}) => {\n  const checkUserByEmail = await UserModel.findOne({\n    email\n  });\n  if (checkUserByEmail) {\n    throw new Error(\"User Already Exists...!\");\n  }\n  return false;\n};\nUserSchema.statics.findByEmailAndPassword = async ({\n  email,\n  password\n}) => {\n  const user = await UserModel.findOne({\n    email\n  });\n  if (!user) throw new Error(\"User does not exist !!!\");\n\n  // Compare Password\n  const doesPasswordMatch = _bcryptjs.default.compare(password, user.password);\n  if (!doesPasswordMatch) throw new Error(\"Invalid Credentials !!!\");\n  return user;\n};\n\n// Password Encryption\nUserSchema.pre(\"save\", function (next) {\n  const user = this;\n\n  // password is modified\n  if (!user.isModified(\"password\")) return next();\n\n  // generate bcrypt salt\n  _bcryptjs.default.genSalt(8, (error, salt) => {\n    if (error) return next(error);\n\n    // hash the password\n    _bcryptjs.default.hash(user.password, salt, (error, hash) => {\n      if (error) return next(error);\n\n      // assigning hashed password\n      user.password = hash;\n      return next();\n    });\n  });\n});\nconst UserModel = _mongoose.default.model(\"users\", UserSchema);\nexports.UserModel = UserModel;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJmdWxsTmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImVtYWlsIiwicGFzc3dvcmQiLCJ0aW1lc3RhbXBzIiwibWV0aG9kcyIsImdlbmVyYXRlSnd0VG9rZW4iLCJqd3QiLCJzaWduIiwidXNlciIsIl9pZCIsInRvU3RyaW5nIiwic3RhdGljcyIsImZpbmRCeUVtYWlsIiwiY2hlY2tVc2VyQnlFbWFpbCIsIlVzZXJNb2RlbCIsImZpbmRPbmUiLCJFcnJvciIsImZpbmRCeUVtYWlsQW5kUGFzc3dvcmQiLCJkb2VzUGFzc3dvcmRNYXRjaCIsImJjcnlwdCIsImNvbXBhcmUiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsImdlblNhbHQiLCJlcnJvciIsInNhbHQiLCJoYXNoIiwibW9kZWwiXSwic291cmNlUm9vdCI6IkQ6XFxwcm9qZWN0c1xcZGVzaWduLXdlYi1hcHBsaWNhdGlvblxcc2VydmVyXFxkYXRhYmFzZVxcIiwic291cmNlcyI6WyJ1c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcblxyXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgICBmdWxsTmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBlbWFpbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcgfSxcclxuICB9LFxyXG4gIHtcclxuICAgIHRpbWVzdGFtcHM6IHRydWUsXHJcbiAgfVxyXG4pO1xyXG5cclxuLy9hdHRhY2htZW50c1xyXG5Vc2VyU2NoZW1hLm1ldGhvZHMuZ2VuZXJhdGVKd3RUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gand0LnNpZ24oeyB1c2VyOiB0aGlzLl9pZC50b1N0cmluZygpIH0sIFwicHJvY2Vzcy5lbnYuU0VDUkVUX0tFWVwiKTtcclxufTtcclxuXHJcbi8vaGVscGVyIGZ1bmN0aW9uXHJcblVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlFbWFpbCA9IGFzeW5jICh7IGVtYWlsIH0pID0+IHtcclxuICBjb25zdCBjaGVja1VzZXJCeUVtYWlsID0gYXdhaXQgVXNlck1vZGVsLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuXHJcbiAgaWYgKGNoZWNrVXNlckJ5RW1haWwpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgQWxyZWFkeSBFeGlzdHMuLi4hXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuVXNlclNjaGVtYS5zdGF0aWNzLmZpbmRCeUVtYWlsQW5kUGFzc3dvcmQgPSBhc3luYyAoeyBlbWFpbCwgcGFzc3dvcmQgfSkgPT4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyTW9kZWwuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG4gIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBkb2VzIG5vdCBleGlzdCAhISFcIik7XHJcblxyXG4gIC8vIENvbXBhcmUgUGFzc3dvcmRcclxuICBjb25zdCBkb2VzUGFzc3dvcmRNYXRjaCA9IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcclxuXHJcbiAgaWYgKCFkb2VzUGFzc3dvcmRNYXRjaCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDcmVkZW50aWFscyAhISFcIik7XHJcblxyXG4gIHJldHVybiB1c2VyO1xyXG59O1xyXG5cclxuLy8gUGFzc3dvcmQgRW5jcnlwdGlvblxyXG5Vc2VyU2NoZW1hLnByZShcInNhdmVcIiwgZnVuY3Rpb24gKG5leHQpIHtcclxuICBjb25zdCB1c2VyID0gdGhpcztcclxuXHJcbiAgLy8gcGFzc3dvcmQgaXMgbW9kaWZpZWRcclxuICBpZiAoIXVzZXIuaXNNb2RpZmllZChcInBhc3N3b3JkXCIpKSByZXR1cm4gbmV4dCgpO1xyXG5cclxuICAvLyBnZW5lcmF0ZSBiY3J5cHQgc2FsdFxyXG4gIGJjcnlwdC5nZW5TYWx0KDgsIChlcnJvciwgc2FsdCkgPT4ge1xyXG4gICAgaWYgKGVycm9yKSByZXR1cm4gbmV4dChlcnJvcik7XHJcblxyXG4gICAgLy8gaGFzaCB0aGUgcGFzc3dvcmRcclxuICAgIGJjcnlwdC5oYXNoKHVzZXIucGFzc3dvcmQsIHNhbHQsIChlcnJvciwgaGFzaCkgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHJldHVybiBuZXh0KGVycm9yKTtcclxuXHJcbiAgICAgIC8vIGFzc2lnbmluZyBoYXNoZWQgcGFzc3dvcmRcclxuICAgICAgdXNlci5wYXNzd29yZCA9IGhhc2g7XHJcbiAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgVXNlck1vZGVsID0gbW9uZ29vc2UubW9kZWwoXCJ1c2Vyc1wiLCBVc2VyU2NoZW1hKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBK0I7QUFFL0IsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FDcEM7RUFDRUMsUUFBUSxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzFDQyxLQUFLLEVBQUU7SUFBRUgsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdkNFLFFBQVEsRUFBRTtJQUFFSixJQUFJLEVBQUVDO0VBQU87QUFDM0IsQ0FBQyxFQUNEO0VBQ0VJLFVBQVUsRUFBRTtBQUNkLENBQUMsQ0FDRjs7QUFFRDtBQUNBVCxVQUFVLENBQUNVLE9BQU8sQ0FBQ0MsZ0JBQWdCLEdBQUcsWUFBWTtFQUNoRCxPQUFPQyxxQkFBRyxDQUFDQyxJQUFJLENBQUM7SUFBRUMsSUFBSSxFQUFFLElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRO0VBQUcsQ0FBQyxFQUFFLHdCQUF3QixDQUFDO0FBQzFFLENBQUM7O0FBRUQ7QUFDQWhCLFVBQVUsQ0FBQ2lCLE9BQU8sQ0FBQ0MsV0FBVyxHQUFHLE9BQU87RUFBRVg7QUFBTSxDQUFDLEtBQUs7RUFDcEQsTUFBTVksZ0JBQWdCLEdBQUcsTUFBTUMsU0FBUyxDQUFDQyxPQUFPLENBQUM7SUFBRWQ7RUFBTSxDQUFDLENBQUM7RUFFM0QsSUFBSVksZ0JBQWdCLEVBQUU7SUFDcEIsTUFBTSxJQUFJRyxLQUFLLENBQUMseUJBQXlCLENBQUM7RUFDNUM7RUFFQSxPQUFPLEtBQUs7QUFDZCxDQUFDO0FBRUR0QixVQUFVLENBQUNpQixPQUFPLENBQUNNLHNCQUFzQixHQUFHLE9BQU87RUFBRWhCLEtBQUs7RUFBRUM7QUFBUyxDQUFDLEtBQUs7RUFDekUsTUFBTU0sSUFBSSxHQUFHLE1BQU1NLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDO0lBQUVkO0VBQU0sQ0FBQyxDQUFDO0VBQy9DLElBQUksQ0FBQ08sSUFBSSxFQUFFLE1BQU0sSUFBSVEsS0FBSyxDQUFDLHlCQUF5QixDQUFDOztFQUVyRDtFQUNBLE1BQU1FLGlCQUFpQixHQUFHQyxpQkFBTSxDQUFDQyxPQUFPLENBQUNsQixRQUFRLEVBQUVNLElBQUksQ0FBQ04sUUFBUSxDQUFDO0VBRWpFLElBQUksQ0FBQ2dCLGlCQUFpQixFQUFFLE1BQU0sSUFBSUYsS0FBSyxDQUFDLHlCQUF5QixDQUFDO0VBRWxFLE9BQU9SLElBQUk7QUFDYixDQUFDOztBQUVEO0FBQ0FkLFVBQVUsQ0FBQzJCLEdBQUcsQ0FBQyxNQUFNLEVBQUUsVUFBVUMsSUFBSSxFQUFFO0VBQ3JDLE1BQU1kLElBQUksR0FBRyxJQUFJOztFQUVqQjtFQUNBLElBQUksQ0FBQ0EsSUFBSSxDQUFDZSxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBT0QsSUFBSSxFQUFFOztFQUUvQztFQUNBSCxpQkFBTSxDQUFDSyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUNDLEtBQUssRUFBRUMsSUFBSSxLQUFLO0lBQ2pDLElBQUlELEtBQUssRUFBRSxPQUFPSCxJQUFJLENBQUNHLEtBQUssQ0FBQzs7SUFFN0I7SUFDQU4saUJBQU0sQ0FBQ1EsSUFBSSxDQUFDbkIsSUFBSSxDQUFDTixRQUFRLEVBQUV3QixJQUFJLEVBQUUsQ0FBQ0QsS0FBSyxFQUFFRSxJQUFJLEtBQUs7TUFDaEQsSUFBSUYsS0FBSyxFQUFFLE9BQU9ILElBQUksQ0FBQ0csS0FBSyxDQUFDOztNQUU3QjtNQUNBakIsSUFBSSxDQUFDTixRQUFRLEdBQUd5QixJQUFJO01BQ3BCLE9BQU9MLElBQUksRUFBRTtJQUNmLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVLLE1BQU1SLFNBQVMsR0FBR25CLGlCQUFRLENBQUNpQyxLQUFLLENBQUMsT0FBTyxFQUFFbEMsVUFBVSxDQUFDO0FBQUMifQ==","map":{"version":3,"names":["UserSchema","mongoose","Schema","fullName","type","String","required","email","password","timestamps","methods","generateJwtToken","jwt","sign","user","_id","toString","statics","findByEmail","checkUserByEmail","UserModel","findOne","Error","findByEmailAndPassword","doesPasswordMatch","bcrypt","compare","pre","next","isModified","genSalt","error","salt","hash","model"],"sourceRoot":"D:\\projects\\design-web-application\\server\\database\\","sources":["user.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nconst UserSchema = new mongoose.Schema(\r\n  {\r\n    fullName: { type: String, required: true },\r\n    email: { type: String, required: true },\r\n    password: { type: String },\r\n  },\r\n  {\r\n    timestamps: true,\r\n  }\r\n);\r\n\r\n//attachments\r\nUserSchema.methods.generateJwtToken = function () {\r\n  return jwt.sign({ user: this._id.toString() }, \"process.env.SECRET_KEY\");\r\n};\r\n\r\n//helper function\r\nUserSchema.statics.findByEmail = async ({ email }) => {\r\n  const checkUserByEmail = await UserModel.findOne({ email });\r\n\r\n  if (checkUserByEmail) {\r\n    throw new Error(\"User Already Exists...!\");\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nUserSchema.statics.findByEmailAndPassword = async ({ email, password }) => {\r\n  const user = await UserModel.findOne({ email });\r\n  if (!user) throw new Error(\"User does not exist !!!\");\r\n\r\n  // Compare Password\r\n  const doesPasswordMatch = bcrypt.compare(password, user.password);\r\n\r\n  if (!doesPasswordMatch) throw new Error(\"Invalid Credentials !!!\");\r\n\r\n  return user;\r\n};\r\n\r\n// Password Encryption\r\nUserSchema.pre(\"save\", function (next) {\r\n  const user = this;\r\n\r\n  // password is modified\r\n  if (!user.isModified(\"password\")) return next();\r\n\r\n  // generate bcrypt salt\r\n  bcrypt.genSalt(8, (error, salt) => {\r\n    if (error) return next(error);\r\n\r\n    // hash the password\r\n    bcrypt.hash(user.password, salt, (error, hash) => {\r\n      if (error) return next(error);\r\n\r\n      // assigning hashed password\r\n      user.password = hash;\r\n      return next();\r\n    });\r\n  });\r\n});\r\n\r\nexport const UserModel = mongoose.model(\"users\", UserSchema);\r\n"],"mappings":";;;;;;AAAA;AACA;AACA;AAA+B;AAE/B,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACpC;EACEC,QAAQ,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CC,KAAK,EAAE;IAAEH,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACvCE,QAAQ,EAAE;IAAEJ,IAAI,EAAEC;EAAO;AAC3B,CAAC,EACD;EACEI,UAAU,EAAE;AACd,CAAC,CACF;;AAED;AACAT,UAAU,CAACU,OAAO,CAACC,gBAAgB,GAAG,YAAY;EAChD,OAAOC,qBAAG,CAACC,IAAI,CAAC;IAAEC,IAAI,EAAE,IAAI,CAACC,GAAG,CAACC,QAAQ;EAAG,CAAC,EAAE,wBAAwB,CAAC;AAC1E,CAAC;;AAED;AACAhB,UAAU,CAACiB,OAAO,CAACC,WAAW,GAAG,OAAO;EAAEX;AAAM,CAAC,KAAK;EACpD,MAAMY,gBAAgB,GAAG,MAAMC,SAAS,CAACC,OAAO,CAAC;IAAEd;EAAM,CAAC,CAAC;EAE3D,IAAIY,gBAAgB,EAAE;IACpB,MAAM,IAAIG,KAAK,CAAC,yBAAyB,CAAC;EAC5C;EAEA,OAAO,KAAK;AACd,CAAC;AAEDtB,UAAU,CAACiB,OAAO,CAACM,sBAAsB,GAAG,OAAO;EAAEhB,KAAK;EAAEC;AAAS,CAAC,KAAK;EACzE,MAAMM,IAAI,GAAG,MAAMM,SAAS,CAACC,OAAO,CAAC;IAAEd;EAAM,CAAC,CAAC;EAC/C,IAAI,CAACO,IAAI,EAAE,MAAM,IAAIQ,KAAK,CAAC,yBAAyB,CAAC;;EAErD;EACA,MAAME,iBAAiB,GAAGC,iBAAM,CAACC,OAAO,CAAClB,QAAQ,EAAEM,IAAI,CAACN,QAAQ,CAAC;EAEjE,IAAI,CAACgB,iBAAiB,EAAE,MAAM,IAAIF,KAAK,CAAC,yBAAyB,CAAC;EAElE,OAAOR,IAAI;AACb,CAAC;;AAED;AACAd,UAAU,CAAC2B,GAAG,CAAC,MAAM,EAAE,UAAUC,IAAI,EAAE;EACrC,MAAMd,IAAI,GAAG,IAAI;;EAEjB;EACA,IAAI,CAACA,IAAI,CAACe,UAAU,CAAC,UAAU,CAAC,EAAE,OAAOD,IAAI,EAAE;;EAE/C;EACAH,iBAAM,CAACK,OAAO,CAAC,CAAC,EAAE,CAACC,KAAK,EAAEC,IAAI,KAAK;IACjC,IAAID,KAAK,EAAE,OAAOH,IAAI,CAACG,KAAK,CAAC;;IAE7B;IACAN,iBAAM,CAACQ,IAAI,CAACnB,IAAI,CAACN,QAAQ,EAAEwB,IAAI,EAAE,CAACD,KAAK,EAAEE,IAAI,KAAK;MAChD,IAAIF,KAAK,EAAE,OAAOH,IAAI,CAACG,KAAK,CAAC;;MAE7B;MACAjB,IAAI,CAACN,QAAQ,GAAGyB,IAAI;MACpB,OAAOL,IAAI,EAAE;IACf,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC;AAEK,MAAMR,SAAS,GAAGnB,iBAAQ,CAACiC,KAAK,CAAC,OAAO,EAAElC,UAAU,CAAC;AAAC"}},"mtime":1666017068237},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"filename\":\"D:\\\\projects\\\\design-web-application\\\\server\\\\config\\\\route.config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\projects\\\\design-web-application\\\\server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _passport = _interopRequireDefault(require(\"passport\"));\nvar _passportJwt = _interopRequireDefault(require(\"passport-jwt\"));\nvar _user = require(\"../database/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst JwtStrategy = _passportJwt.default.Strategy;\nconst ExtractJwt = _passportJwt.default.ExtractJwt;\nconst options = {\n  jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n  secretOrKey: \"process.env.SECRET_KEY\"\n};\nvar _default = passport => {\n  passport.use(new JwtStrategy(options, async (jwt__payload, done) => {\n    try {\n      const doesUserExist = await _user.UserModel.findById(jwt__payload.user);\n      if (!doesUserExist) return done(null, false);\n      return done(null, doesUserExist);\n    } catch (error) {\n      throw new Error(error);\n    }\n  }));\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJKd3RTdHJhdGVneSIsIkp3dFBhc3Nwb3J0IiwiU3RyYXRlZ3kiLCJFeHRyYWN0Snd0Iiwib3B0aW9ucyIsImp3dEZyb21SZXF1ZXN0IiwiZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuIiwic2VjcmV0T3JLZXkiLCJwYXNzcG9ydCIsInVzZSIsImp3dF9fcGF5bG9hZCIsImRvbmUiLCJkb2VzVXNlckV4aXN0IiwiVXNlck1vZGVsIiwiZmluZEJ5SWQiLCJ1c2VyIiwiZXJyb3IiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiRDpcXHByb2plY3RzXFxkZXNpZ24td2ViLWFwcGxpY2F0aW9uXFxzZXJ2ZXJcXGNvbmZpZ1xcIiwic291cmNlcyI6WyJyb3V0ZS5jb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xyXG5pbXBvcnQgSnd0UGFzc3BvcnQgZnJvbSBcInBhc3Nwb3J0LWp3dFwiO1xyXG5cclxuaW1wb3J0IHsgVXNlck1vZGVsIH0gZnJvbSBcIi4uL2RhdGFiYXNlL3VzZXJcIjtcclxuXHJcbmNvbnN0IEp3dFN0cmF0ZWd5ID0gSnd0UGFzc3BvcnQuU3RyYXRlZ3k7XHJcbmNvbnN0IEV4dHJhY3RKd3QgPSBKd3RQYXNzcG9ydC5FeHRyYWN0Snd0O1xyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBqd3RGcm9tUmVxdWVzdDogRXh0cmFjdEp3dC5mcm9tQXV0aEhlYWRlckFzQmVhcmVyVG9rZW4oKSxcclxuICBzZWNyZXRPcktleTogXCJwcm9jZXNzLmVudi5TRUNSRVRfS0VZXCIsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCAocGFzc3BvcnQpID0+IHtcclxuICBwYXNzcG9ydC51c2UoXHJcbiAgICBuZXcgSnd0U3RyYXRlZ3kob3B0aW9ucywgYXN5bmMgKGp3dF9fcGF5bG9hZCwgZG9uZSkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRvZXNVc2VyRXhpc3QgPSBhd2FpdCBVc2VyTW9kZWwuZmluZEJ5SWQoand0X19wYXlsb2FkLnVzZXIpO1xyXG4gICAgICAgIGlmICghZG9lc1VzZXJFeGlzdCkgcmV0dXJuIGRvbmUobnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiBkb25lKG51bGwsIGRvZXNVc2VyRXhpc3QpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgKTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFBNkM7QUFFN0MsTUFBTUEsV0FBVyxHQUFHQyxvQkFBVyxDQUFDQyxRQUFRO0FBQ3hDLE1BQU1DLFVBQVUsR0FBR0Ysb0JBQVcsQ0FBQ0UsVUFBVTtBQUV6QyxNQUFNQyxPQUFPLEdBQUc7RUFDZEMsY0FBYyxFQUFFRixVQUFVLENBQUNHLDJCQUEyQixFQUFFO0VBQ3hEQyxXQUFXLEVBQUU7QUFDZixDQUFDO0FBQUMsZUFFY0MsUUFBUSxJQUFLO0VBQzNCQSxRQUFRLENBQUNDLEdBQUcsQ0FDVixJQUFJVCxXQUFXLENBQUNJLE9BQU8sRUFBRSxPQUFPTSxZQUFZLEVBQUVDLElBQUksS0FBSztJQUNyRCxJQUFJO01BQ0YsTUFBTUMsYUFBYSxHQUFHLE1BQU1DLGVBQVMsQ0FBQ0MsUUFBUSxDQUFDSixZQUFZLENBQUNLLElBQUksQ0FBQztNQUNqRSxJQUFJLENBQUNILGFBQWEsRUFBRSxPQUFPRCxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQztNQUM1QyxPQUFPQSxJQUFJLENBQUMsSUFBSSxFQUFFQyxhQUFhLENBQUM7SUFDbEMsQ0FBQyxDQUFDLE9BQU9JLEtBQUssRUFBRTtNQUNkLE1BQU0sSUFBSUMsS0FBSyxDQUFDRCxLQUFLLENBQUM7SUFDeEI7RUFDRixDQUFDLENBQUMsQ0FDSDtBQUNILENBQUM7QUFBQSJ9","map":{"version":3,"names":["JwtStrategy","JwtPassport","Strategy","ExtractJwt","options","jwtFromRequest","fromAuthHeaderAsBearerToken","secretOrKey","passport","use","jwt__payload","done","doesUserExist","UserModel","findById","user","error","Error"],"sourceRoot":"D:\\projects\\design-web-application\\server\\config\\","sources":["route.config.js"],"sourcesContent":["import passport from \"passport\";\r\nimport JwtPassport from \"passport-jwt\";\r\n\r\nimport { UserModel } from \"../database/user\";\r\n\r\nconst JwtStrategy = JwtPassport.Strategy;\r\nconst ExtractJwt = JwtPassport.ExtractJwt;\r\n\r\nconst options = {\r\n  jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\r\n  secretOrKey: \"process.env.SECRET_KEY\",\r\n};\r\n\r\nexport default (passport) => {\r\n  passport.use(\r\n    new JwtStrategy(options, async (jwt__payload, done) => {\r\n      try {\r\n        const doesUserExist = await UserModel.findById(jwt__payload.user);\r\n        if (!doesUserExist) return done(null, false);\r\n        return done(null, doesUserExist);\r\n      } catch (error) {\r\n        throw new Error(error);\r\n      }\r\n    })\r\n  );\r\n};\r\n"],"mappings":";;;;;;AAAA;AACA;AAEA;AAA6C;AAE7C,MAAMA,WAAW,GAAGC,oBAAW,CAACC,QAAQ;AACxC,MAAMC,UAAU,GAAGF,oBAAW,CAACE,UAAU;AAEzC,MAAMC,OAAO,GAAG;EACdC,cAAc,EAAEF,UAAU,CAACG,2BAA2B,EAAE;EACxDC,WAAW,EAAE;AACf,CAAC;AAAC,eAEcC,QAAQ,IAAK;EAC3BA,QAAQ,CAACC,GAAG,CACV,IAAIT,WAAW,CAACI,OAAO,EAAE,OAAOM,YAAY,EAAEC,IAAI,KAAK;IACrD,IAAI;MACF,MAAMC,aAAa,GAAG,MAAMC,eAAS,CAACC,QAAQ,CAACJ,YAAY,CAACK,IAAI,CAAC;MACjE,IAAI,CAACH,aAAa,EAAE,OAAOD,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;MAC5C,OAAOA,IAAI,CAAC,IAAI,EAAEC,aAAa,CAAC;IAClC,CAAC,CAAC,OAAOI,KAAK,EAAE;MACd,MAAM,IAAIC,KAAK,CAACD,KAAK,CAAC;IACxB;EACF,CAAC,CAAC,CACH;AACH,CAAC;AAAA"}},"mtime":1666014605504}}